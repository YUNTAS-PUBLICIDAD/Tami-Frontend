<!DOCTYPE html><html lang="es"> <head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="google-site-verification" content="jBfmNhIFybwKwy28N7G4Ynrp0giMsnb73k_m-XoPW74"><link rel="icon" type="image/webp+xml" href="/logo.webp"><!-- Preload de fuentes locales WOFF2 --><link rel="preload" href="/fonts/montserrat-regular.woff2" as="font" type="font/woff2" crossorigin><link rel="preload" href="/fonts/montserrat-600.woff2" as="font" type="font/woff2" crossorigin><link rel="preload" href="/fonts/montserrat-800.woff2" as="font" type="font/woff2" crossorigin><link rel="preconnect" href="https://apitami.tamimaquinarias.com"><link rel="canonical" href="https://tamimaquinarias.com/productos"><meta name="generator" content="Astro v5.15.1"><meta name="author" content="Tamimaquinarias"><meta name="robots" content="index, follow"><meta name="publisher" content="Tami Maquinarias"><title>Product Details</title><meta name="description" content="Descripcion por defecto"><!-- <style>
      body {
        font-family:
          "Montserrat",
          system-ui,
          -apple-system,
          BlinkMacSystemFont,
          "Segoe UI",
          Roboto,
          sans-serif;

        width: 100%;
        max-width: 100vw;
        overflow-x: hidden;
      }
      .font-montserrat {
        font-family:
          "Montserrat",
          system-ui,
          -apple-system,
          BlinkMacSystemFont,
          sans-serif;
      }

      .float {
        text-align: center;
        font-size: 30px;
        z-index: 100;
      }

      .font-loading {
        visibility: hidden;
      }

      .fonts-loaded .font-loading {
        visibility: visible;
      }
    </style> --><meta name="google-site-verification" content="fMYl61WKoofkx6daixXAZuFbR-zw9NlYGrf22iA1r0w"><link rel="stylesheet" href="/_astro/blog.ejIxUIDc.css"></head> <body class="font-montserrat w-full"> <style>astro-island,astro-slot,astro-static-slot{display:contents}</style><script>(()=>{var l=(n,t)=>{let i=async()=>{await(await n())()},e=typeof t.value=="object"?t.value:void 0,s={timeout:e==null?void 0:e.timeout};"requestIdleCallback"in window?window.requestIdleCallback(i,s):setTimeout(i,s.timeout||200)};(self.Astro||(self.Astro={})).idle=l;window.dispatchEvent(new Event("astro:idle"));})();</script><script>(()=>{var A=Object.defineProperty;var g=(i,o,a)=>o in i?A(i,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):i[o]=a;var d=(i,o,a)=>g(i,typeof o!="symbol"?o+"":o,a);{let i={0:t=>m(t),1:t=>a(t),2:t=>new RegExp(t),3:t=>new Date(t),4:t=>new Map(a(t)),5:t=>new Set(a(t)),6:t=>BigInt(t),7:t=>new URL(t),8:t=>new Uint8Array(t),9:t=>new Uint16Array(t),10:t=>new Uint32Array(t),11:t=>1/0*t},o=t=>{let[l,e]=t;return l in i?i[l](e):void 0},a=t=>t.map(o),m=t=>typeof t!="object"||t===null?t:Object.fromEntries(Object.entries(t).map(([l,e])=>[l,o(e)]));class y extends HTMLElement{constructor(){super(...arguments);d(this,"Component");d(this,"hydrator");d(this,"hydrate",async()=>{var b;if(!this.hydrator||!this.isConnected)return;let e=(b=this.parentElement)==null?void 0:b.closest("astro-island[ssr]");if(e){e.addEventListener("astro:hydrate",this.hydrate,{once:!0});return}let c=this.querySelectorAll("astro-slot"),n={},h=this.querySelectorAll("template[data-astro-template]");for(let r of h){let s=r.closest(this.tagName);s!=null&&s.isSameNode(this)&&(n[r.getAttribute("data-astro-template")||"default"]=r.innerHTML,r.remove())}for(let r of c){let s=r.closest(this.tagName);s!=null&&s.isSameNode(this)&&(n[r.getAttribute("name")||"default"]=r.innerHTML)}let p;try{p=this.hasAttribute("props")?m(JSON.parse(this.getAttribute("props"))):{}}catch(r){let s=this.getAttribute("component-url")||"<unknown>",v=this.getAttribute("component-export");throw v&&(s+=` (export ${v})`),console.error(`[hydrate] Error parsing props for component ${s}`,this.getAttribute("props"),r),r}let u;await this.hydrator(this)(this.Component,p,n,{client:this.getAttribute("client")}),this.removeAttribute("ssr"),this.dispatchEvent(new CustomEvent("astro:hydrate"))});d(this,"unmount",()=>{this.isConnected||this.dispatchEvent(new CustomEvent("astro:unmount"))})}disconnectedCallback(){document.removeEventListener("astro:after-swap",this.unmount),document.addEventListener("astro:after-swap",this.unmount,{once:!0})}connectedCallback(){if(!this.hasAttribute("await-children")||document.readyState==="interactive"||document.readyState==="complete")this.childrenConnectedCallback();else{let e=()=>{document.removeEventListener("DOMContentLoaded",e),c.disconnect(),this.childrenConnectedCallback()},c=new MutationObserver(()=>{var n;((n=this.lastChild)==null?void 0:n.nodeType)===Node.COMMENT_NODE&&this.lastChild.nodeValue==="astro:end"&&(this.lastChild.remove(),e())});c.observe(this,{childList:!0}),document.addEventListener("DOMContentLoaded",e)}}async childrenConnectedCallback(){let e=this.getAttribute("before-hydration-url");e&&await import(e),this.start()}async start(){let e=JSON.parse(this.getAttribute("opts")),c=this.getAttribute("client");if(Astro[c]===void 0){window.addEventListener(`astro:${c}`,()=>this.start(),{once:!0});return}try{await Astro[c](async()=>{let n=this.getAttribute("renderer-url"),[h,{default:p}]=await Promise.all([import(this.getAttribute("component-url")),n?import(n):()=>()=>{}]),u=this.getAttribute("component-export")||"default";if(!u.includes("."))this.Component=h[u];else{this.Component=h;for(let f of u.split("."))this.Component=this.Component[f]}return this.hydrator=p,this.hydrate},e,this)}catch(n){console.error(`[astro-island] Error hydrating ${this.getAttribute("component-url")}`,n)}}attributeChangedCallback(){this.hydrate()}}d(y,"observedAttributes",["props"]),customElements.get("astro-island")||customElements.define("astro-island",y)}})();</script><astro-island uid="ZsGDcO" prefix="r2" component-url="/_astro/NavBar.B2JKAvbW.js" component-export="default" renderer-url="/_astro/client.B_PwMJWB.js" props="{}" ssr client="idle" opts="{&quot;name&quot;:&quot;NavBar&quot;,&quot;value&quot;:true}" await-children><link rel="preload" as="image" href="/_astro/logo-estatico-100x116.B0Pf3Br1.webp" fetchPriority="high"/><header class="
        fixed w-full top-0 z-50 transition-colors duration-300
        bg-transparent 
      "><div class="max-w-[1834px] mx-auto px-4 sm:px-6 lg:px-8"><div class="flex items-center justify-between h-24"><div class="flex-shrink-0"><a href="/" title="Ir a la sección de inicio"><img src="/_astro/logo-estatico-100x116.B0Pf3Br1.webp" alt="Logo de Tami" title="Logo de Tami" class="h-16 w-auto object-contain" fetchPriority="high"/></a></div><nav class="hidden lg:flex justify-center flex-grow"><ul class="flex items-center space-x-12"><li><a href="/" class="
        text-white font-semibold uppercase tracking-wider
        relative pb-1
        after:content-[&#x27;&#x27;] after:absolute after:bottom-0 after:left-0 
        after:h-[2px] after:bg-white
        after:transition-all after:duration-300
        after:w-0 hover:after:w-full
      " title="Ir a la sección de INICIO">INICIO</a></li><li><a href="/sobre-nosotros" class="
        text-white font-semibold uppercase tracking-wider
        relative pb-1
        after:content-[&#x27;&#x27;] after:absolute after:bottom-0 after:left-0 
        after:h-[2px] after:bg-white
        after:transition-all after:duration-300
        after:w-0 hover:after:w-full
      " title="Ir a la sección de NOSOTROS">NOSOTROS</a></li><li><a href="/productos" class="
        text-white font-semibold uppercase tracking-wider
        relative pb-1
        after:content-[&#x27;&#x27;] after:absolute after:bottom-0 after:left-0 
        after:h-[2px] after:bg-white
        after:transition-all after:duration-300
        after:w-0 hover:after:w-full
      " title="Ir a la sección de PRODUCTOS">PRODUCTOS</a></li><li><a href="/politicas-de-envio" class="
        text-white font-semibold uppercase tracking-wider
        relative pb-1
        after:content-[&#x27;&#x27;] after:absolute after:bottom-0 after:left-0 
        after:h-[2px] after:bg-white
        after:transition-all after:duration-300
        after:w-0 hover:after:w-full
      " title="Ir a la sección de POLÍTICAS DE ENVÍO">POLÍTICAS DE ENVÍO</a></li><li><a href="/blog" class="
        text-white font-semibold uppercase tracking-wider
        relative pb-1
        after:content-[&#x27;&#x27;] after:absolute after:bottom-0 after:left-0 
        after:h-[2px] after:bg-white
        after:transition-all after:duration-300
        after:w-0 hover:after:w-full
      " title="Ir a la sección de BLOGS">BLOGS</a></li></ul></nav><div class="flex items-center"><a href="/auth/sign-in" title="Ir a la sección de inicio de sesión" class="hidden lg:block bg-white rounded-md py-3 px-8 text-[#07625b] font-bold text-lg hover:bg-gray-200 transition-colors">LOGIN</a><div class="lg:hidden ml-4"><button class="w-12 h-12 flex items-center justify-center text-white" title="Abrir Menú"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" height="32" width="32" xmlns="http://www.w3.org/2000/svg"><path fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="48" d="M88 152h336M88 256h336M88 360h336"></path></svg></button></div></div></div></div></header><!--astro:end--></astro-island>  <div class="w-full">  <div class="pt-16 md:pt-40 md:pb-16 bg-gradient-to-b from-teal-700 to-teal-400 text-white relative overflow-hidden"> <div class="max-w-6xl md:w-1/2 px-4 md:px-24 py-8 md:py-12 relative z-10"> <div class="flex items-center gap-6 mb-4"> <div class="w-5 md:w-6 h-5 md:h-6"> <img src="/_astro/flecha-product.C90HhW7K.svg" alt="Flecha" title="Flecha" class="w-full h-full" loading="lazy"> </div> <h2 class="text-xl uppercase md:text-3xl font-bold" id="product-title">
Título Producto
</h2> </div> <h1 class="text-2xl md:text-5xl/14 uppercase font-bold mb-6 md:mb-8" id="product-subtitle">
Subtitulo Producto
</h1> <button id="btnQuotationHero" class="bg-white text-teal-600 px-8 md:px-12 py-2 md:py-3 w-full rounded-full font-bold text-lg md:text-3xl hover:bg-opacity-90 transition cursor-pointer">
¡COTÍZALO!
</button> </div>  <div class="hidden md:flex absolute right-0 top-32 w-full md:w-1/2 h-full bg-white
                  rounded-bl-[30%] md:rounded-bl-[50%] rounded-tl-[40%] md:rounded-tl-[60%]
                  rounded-tr-[15%] md:rounded-tr-[25%] items-center justify-center"> <img id="product-img" src="" alt="Imagen del producto" title="Imagen del producto" class="w-3/4 md:w-4/5 h-3/4 md:h-4/5 object-contain mx-auto" loading="lazy"> </div> </div>  <div class="max-w-6xl mx-auto px-4 md:px-6 py-6 mt-6 md:py-8"> <div class="grid grid-cols-1 md:grid-cols-2 gap-6 md:gap-8">  <div class="space-y-4 w-full max-w-[440px]">  <div class="w-full aspect-[1/1] bg-gray-100 rounded-lg overflow-hidden flex items-center justify-center"> <img id="product-viewer" src="" alt="Imagen del producto" title="Imagen del producto" class="w-full h-full object-contain" loading="lazy"> </div>  <div class="grid grid-cols-4 gap-2 w-full" id="images-list"></div> </div>  <div> <div class="mb-6"> <h3 class="text-3xl font-black mb-2 text-teal-800" id="info-title"></h3> <h1 class="font-bold mb-2 text-lg">Información del producto:</h1> <p class="text-gray-700 text-justify break-words" id="info-description"></p> </div>  <div class="bg-gray-100 rounded-lg mb-6 p-4 md:p-8"> <h3 class="font-bold mb-2 text-lg">Detalles del producto</h3> <h3 class="font-bold mb-2">Especificaciones técnicas:</h3> <ul class="list-disc pl-5 space-y-2 text-gray-700" id="specs-list"></ul> <h3 class="font-bold mt-4 mb-4">Dimensiones:</h3> <div class="flex items-start gap-4 md:gap-12"> <div class="w-24 md:w-32"> <img src="/_astro/box-size.BLX2R9o2.svg" alt="Box Size" title="Box Size" class="w-full h-auto" loading="lazy"> </div> <ul class="space-y-2 md:space-y-4" id="product-dimensions"></ul> </div> </div> <button id="btnQuotationDetail" class="w-full bg-teal-500 text-white py-4 rounded-full font-bold text-xl hover:bg-teal-600 transition cursor-pointer">
COTIZACIÓN
</button> </div> </div>  <div class="mt-8 md:mt-12"> <h2 class="text-xl md:text-2xl font-bold mb-4 md:mb-6 text-teal-500">
PRODUCTOS SIMILARES
</h2> <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4 md:gap-6" id="related-products-container"></div> </div> </div> <!-- Modal --><div id="modal-cotizacion-producto" class="fixed inset-0 bg-black/60 z-50 flex items-center justify-center px-4 hidden"> <div class="bg-white flex flex-col sm:flex-row overflow-hidden shadow-2xl w-[90%] max-w-md sm:max-w-3xl relative animate-slideIn rounded-xl"> <div id="background-modal" class="absolute inset-0 z-20"></div> <!-- Contenedor de imagen - Modificado para centrar y ajustar correctamente --> <div class="absolute inset-0 sm:flex w-full sm:w-[50%] justify-center items-center bg-gray-100 overflow-hidden"> <img id="modal-product-img" src="/images/popup/default.webp" alt="Imagen del producto" title="Imagen del producto" class="h-full w-full object-cover" onerror="this.onerror=null; this.src='/images/popup/default.webp'"> </div> <!-- Formulario dinámico --> <div id="modal-form-container" class="w-full sm:w-3/5 p-6 text-white relative z-30 ml-auto" data-product-link data-whatsapp="51978883199"> <div class="p-8 sm:py-10 sm:mx-8 min-h-[480px] flex flex-col justify-center"> <button id="close-modal-cotizacion" aria-label="Cerrar modal" class="absolute top-4 right-5 text-md text-white hover:text-gray-300 cursor-pointer">
X
</button> <h2 id="modal-title" class="text-2xl sm:text-3xl font-semibold text-center sm:mt-3 mb-8 select-none"></h2> <form id="form-cotizacion-producto" class="flex flex-col gap-3"> <!-- <label class="text-base sm:text-lg font-bold select-none">Nombre</label> --> <input type="text" name="nombre" class="p-2 rounded-lg bg-white text-black outline-none mb-1" placeholder="Nombre y Apellidos" required> <!-- <label class="text-base sm:text-lg font-bold select-none">Correo</label> --> <input type="email" name="correo" class="p-2 rounded-lg bg-white text-black outline-none mb-1" placeholder="Correo@gmail.com" required> <!-- <label class="text-base sm:text-lg font-bold select-none">Teléfono</label> --> <input type="tel" name="telefono" class="p-2 rounded-lg bg-white text-black outline-none mb-1" placeholder="Teléfono: 905 876 524" required> <button id="modal-submit-btn" type="submit" class="mt-4 py-2 rounded-lg text-white font-bold transition-colors shadow-lg">
buttonText
</button> </form> <p id="modal-cotizacion-mensaje" class="text-center mt-4"></p> </div> </div> </div> </div> <script type="module" src="/_astro/ModalDetalles.astro_astro_type_script_index_0_lang.BLJMG3n4.js"></script> </div>  <footer class="bg-teal-700 text-white py-12 sm:px-16"> <div class="container mx-auto px-2 grid grid-cols-1 lg:grid-cols-3 gap-8 sm:gap-12 text-center lg:text-left h-full"> <!-- Separacion en 3 bloques--> <div class="flex flex-row items-center justify-center lg:items-stretch gap-6 lg:gap-12 gap-y-6 w-full lg:mb-0 "> <!-- Logo --> <div class="flex items-center justify-center lg:justify-start"> <img src="/_astro/logo-blanco-tami.BqjAaMyp.gif" alt="Logo de Tami" title="Logo de Tami" loading="lazy" width="120" height="60" class="shrink-0"> </div> <!-- Barra vertical blanca --> <div class="border-l-2 border-white opacity-70 h-[200px]"></div> <!-- Enlaces --> <div class="flex items-center lg:items-start justify-center lg:justify-start p-0 sm:pl-8"> <ul class="space-y-4 font-semibold text-base text-center lg:text-left"> <li> <a href="/" class="hover:text-orange-300 transition-colors">Inicio</a> </li> <li> <a href="/sobre-nosotros" class="hover:text-orange-300 transition-colors">Nosotros</a> </li> <li> <a href="/productos" class="hover:text-orange-300 transition-colors">Productos</a> </li> <li> <a href="/politicas-de-envio" class="hover:text-orange-300 transition-colors">Políticas de Envíos</a> </li> <li> <a href="/blog" class="hover:text-orange-300 transition-colors">Blogs</a> </li> </ul> </div> </div> <!-- Bloque 2: Horario de atención --> <div class="flex justify-center lg:mb-0"> <div class="flex flex-col justify-between text-center lg:text-left h-[200px]"> <!-- Arriba: Horario de atención --> <div> <p class="font-semibold mb-1 text-base">Horario de atención</p> <p class="text-base">Lunes a Viernes<br>9:00 am a 9:00 pm</p> </div> <!-- Abajo: Información de contacto --> <div> <p class="font-semibold mb-1 text-base">Para mayor información</p> <div id="copy-notification" class="fixed bottom-5 left-1/2 -translate-x-1/2 bg-teal-950 text-white px-6 py-3 rounded-full shadow-lg transition-all duration-300 opacity-0 translate-y-10"></div> <script type="module">document.addEventListener("DOMContentLoaded",()=>{const a=document.querySelectorAll("[data-copy]"),t=document.getElementById("copy-notification");if(!t){console.error("No se encontró el elemento de notificación");return}a.forEach(e=>{e.addEventListener("click",()=>{const o=e.innerText.trim();navigator.clipboard.writeText(o).then(()=>{t.innerText=`Copiado: ${o}`,t.classList.remove("translate-y-10","opacity-0"),t.classList.add("translate-y-0","opacity-100"),setTimeout(()=>{t.classList.remove("translate-y-0","opacity-100"),t.classList.add("translate-y-10","opacity-0")},2500)}).catch(n=>console.error("Error al copiar:",n))})})});</script> <p data-copy class="cursor-pointer text-white hover:underline underline-offset-2 text-sm md:text-base"> informestami01@gmail.com </p> <div id="copy-notification" class="fixed bottom-5 left-1/2 -translate-x-1/2 bg-teal-950 text-white px-6 py-3 rounded-full shadow-lg transition-all duration-300 opacity-0 translate-y-10"></div> <div id="copy-notification" class="fixed bottom-5 left-1/2 -translate-x-1/2 bg-teal-950 text-white px-6 py-3 rounded-full shadow-lg transition-all duration-300 opacity-0 translate-y-10"></div>  <p data-copy class="cursor-pointer text-white hover:underline underline-offset-2 text-sm md:text-base"> +51978883199 </p> <div id="copy-notification" class="fixed bottom-5 left-1/2 -translate-x-1/2 bg-teal-950 text-white px-6 py-3 rounded-full shadow-lg transition-all duration-300 opacity-0 translate-y-10"></div> </div> </div> </div> <div class="flex flex-col items-center justify-center space-y-6 h-full text-white "> <button type="button" title="Abrir formulario de asesoría" class="cursor-pointer text-lg font-bold tracking-wide hover:opacity-80 transition-opacity" id="open-scroll-btn">
¡CONTÁCTANOS!
</button> <div class="w-full text-center"> <div class="flex gap-4 justify-center flex-wrap"> <a href="https://api.whatsapp.com/send?phone=51978883199" target="_blank" rel="noopener noreferrer" title="Contáctanos por WhatsApp" class="w-10 h-10 bg-black rounded-full flex items-center justify-center"> <img src="/_astro/smi_whatsapp.2SrrIh8E.svg" alt="Whatsapp de Tami Maquinarias" class="w-6 h-6"> </a><a href="https://www.facebook.com/tamiperu01" target="_blank" rel="noopener noreferrer" title="Visita nuestra página de Facebook" class="w-10 h-10 bg-black rounded-full flex items-center justify-center"> <img src="/_astro/smi_facebook.B_2WF_nX.svg" alt="Facebook de Tami Maquinarias" class="w-6 h-6"> </a><a href="https://www.instagram.com/tami2_02590/?igsh=MWZoYnZjM3FxYXN5cQ%3D%3D" target="_blank" rel="noopener noreferrer" title="Síguenos en Instagram" class="w-10 h-10 bg-black rounded-full flex items-center justify-center"> <img src="/_astro/smi_instagram.Dw9QpT0W.svg" alt="Instagram de Tami Maquinarias" class="w-6 h-6"> </a><a href="https://x.com/Tami_Maquinaria" target="_blank" rel="noopener noreferrer" title="Síguenos en Twitter" class="w-10 h-10 bg-black rounded-full flex items-center justify-center"> <img src="/_astro/smi_twitter.COg1loIL.svg" alt="Twitter de Tami Maquinarias" class="w-6 h-6"> </a> </div> </div> <div class="flex items-center gap-2 text-center"> <span class="text-base font-bold">Libro de reclamaciones</span> <svg xmlns="http://www.w3.org/2000/svg" class="w-10 h-10" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"> <path stroke-linecap="round" stroke-linejoin="round" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path> </svg> </div> </div> </div> </footer> <script>(()=>{var e=async t=>{await(await t())()};(self.Astro||(self.Astro={})).load=e;window.dispatchEvent(new Event("astro:load"));})();</script><astro-island uid="Zh1oVr" prefix="r3" component-url="/_astro/ScrollModal.CnOULTkZ.js" component-export="default" renderer-url="/_astro/client.B_PwMJWB.js" props="{}" ssr client="load" opts="{&quot;name&quot;:&quot;ScrollModal&quot;,&quot;value&quot;:true}"></astro-island>  <script>
    function addOpenScrollListeners() {
      document.querySelectorAll('#open-scroll-btn').forEach(btn => {
        if (!btn.dataset.listenerAdded) {
          btn.addEventListener("click", () => {
            window.dispatchEvent(new Event("open-scroll-modal"));
          });
          btn.dataset.listenerAdded = "true";
        }
      });
    }

    // Inicial
    addOpenScrollListeners();

    // Observer para detectar nuevos botones en el DOM
    const observer = new MutationObserver(() => {
      addOpenScrollListeners();
    });
    observer.observe(document.body, { childList: true, subtree: true });
  </script>   </body></html>  <script>(function(){const getApiUrl = "https://apitami.tamimaquinarias.com";
const productosUrl = {"list":"/api/v1/productos","all":"/api/v1/productos/all","create":"/api/v1/productos"};
const showLoaderString = "\n  function showLoader() {\n    const loader = document.createElement(\"div\");\n    loader.id = \"page-loader\";\n    loader.className =\n      \"fixed inset-0 z-50 flex items-center justify-center bg-white\";\n    loader.innerHTML = `\n      <div class=\"w-16 h-16 border-4 border-teal-500 border-t-transparent rounded-full animate-spin\"></div>\n    `;\n    document.body.appendChild(loader);\n  }\n";
const removeLoaderString = "\n  function removeLoader() {\n    const loader = document.getElementById(\"page-loader\");\n    if (loader) loader.remove();\n  }\n";

  eval(showLoaderString);
  eval(removeLoaderString);

  const productNameToIdMap = {};

  // Mostrar especificaciones y dimensiones
  function displaySpecsAndDimensions(specs, dimensiones) {
    const specsList = document.getElementById("specs-list");
    const dimensionsList = document.getElementById("product-dimensions");
    if (!specsList || !dimensionsList) return;

    specsList.innerHTML = "";
    dimensionsList.innerHTML = "";

    if (Array.isArray(specs)) {
      specs.forEach((spec) => {
        const li = document.createElement("li");
        li.className = "text-gray-700 mb-2 break-words";
        li.textContent = spec.valor;
        specsList.appendChild(li);
      });
    }

    if (dimensiones && typeof dimensiones === "object") {
      const labels = { alto: "H", largo: "L", ancho: "A" };
      Object.entries(labels).forEach(([key, abbr]) => {
        if (dimensiones[key]) {
          const li = document.createElement("li");
          li.className = "flex items-center gap-2";
          const span = document.createElement("span");
          span.className =
            "w-6 h-6 bg-teal-500 rounded-full flex items-center justify-center text-white text-xs font-bold";
          span.textContent = abbr;
          li.appendChild(span);
          li.appendChild(
            document.createTextNode(
              `${key[0].toUpperCase() + key.slice(1)}: ${dimensiones[key]} cm`
            )
          );
          dimensionsList.appendChild(li);
        }
      });
    }
  }

  // Mostrar error en pantalla
  function showErrorMessage(message) {
    const container = document.createElement("div");
    container.className =
      "fixed z-50 inset-0 text-center bg-gradient-to-b from-teal-700 to-teal-400 flex items-center justify-center";
    const messageEl = document.createElement("p");
    messageEl.className = "text-white font-extrabold text-5xl";
    messageEl.textContent = message;
    container.appendChild(messageEl);
    document.body.appendChild(container);
  }

  // Mostrar detalles del producto
  function displayProductDetails(product) {
    const productTitle = document.getElementById("product-title");
    const productSubtitle = document.getElementById("product-subtitle");
    const productImg = document.getElementById("product-img");
    const productViewer = document.getElementById("product-viewer");
    const imagesList = document.getElementById("images-list");
    const infoTitle = document.getElementById("info-title");
    const infoDescription = document.getElementById("info-description");
    const modalContainer = document.getElementById("modal-form-container");
    if (modalContainer && product.seccion) {
      modalContainer.dataset.seccion = product.seccion;
      window.__detalleProductoSeccion = product.seccion;
      modalContainer.dataset.productLink = product.link;
      window.__detalleProductoLink = product.link;
    }

    if (
      !productTitle ||
      !productSubtitle ||
      !productImg ||
      !productViewer ||
      !imagesList ||
      !infoTitle ||
      !infoDescription
    ) {
      console.error("One or more elements not found");
      return;
    }

    productTitle.textContent = product.titulo;
    productSubtitle.textContent = product.subtitulo;
    productImg.src = `${getApiUrl}${product.imagenes[0].url_imagen}`;
    productImg.alt = product.titulo;
    infoTitle.textContent = product.titulo;
    infoDescription.textContent = product.descripcion;

    if (product.imagenes?.length) {
      let currentIndex = 0;
      let carouselInterval = null;
      let carouselTimeout = null;
      const totalImages = Math.min(product.imagenes.length, 4);

      function showImage(index) {
        currentIndex = index;
        productViewer.src = `${getApiUrl}${product.imagenes[index].url_imagen}`;
        productViewer.alt = `${product.titulo} - Vista ${index + 1}`;
        Array.from(imagesList.children).forEach((div, i) => {
          if (i === index) {
            div.classList.add("ring-2", "ring-teal-500");
          } else {
            div.classList.remove("ring-2", "ring-teal-500");
          }
        });
      }

      function startCarousel() {
        if (carouselInterval) clearInterval(carouselInterval);
        carouselInterval = setInterval(() => {
          currentIndex = (currentIndex + 1) % totalImages;
          showImage(currentIndex);
        }, 5000);
      }

      function pauseCarouselAndResume(index) {
        if (carouselInterval) clearInterval(carouselInterval);
        if (carouselTimeout) clearTimeout(carouselTimeout);
        showImage(index);
        carouselTimeout = setTimeout(() => {
          startCarousel();
        }, 5000);
      }

      productViewer.src = `${getApiUrl}${product.imagenes[0].url_imagen}`;
      productViewer.alt = `${product.titulo} - Vista 1`;
      imagesList.innerHTML = "";
      product.imagenes.slice(0, 4).forEach((image, index) => {
        const div = document.createElement("div");
        div.className =
          "aspect-square bg-gray-100 rounded-lg overflow-hidden cursor-pointer opacity-80 hover:opacity-100 hover:scale-105 transition-all duration-300";
        const img = document.createElement("img");
        img.src = `${getApiUrl}${image.url_imagen}`;
        img.alt = `${product.titulo} - Vista ${index + 1}`;
        img.title = product.titulo;
        img.className = "w-full h-full object-cover";
        div.appendChild(img);
        div.onclick = () => {
          pauseCarouselAndResume(index);
        };
        imagesList.appendChild(div);
      });
      showImage(0);
      startCarousel();
    }

    displaySpecsAndDimensions(product.especificaciones, product.dimensiones);
    document.title = product.etiqueta?.meta_titulo;

    let metaDescription = document.querySelector('meta[name="description"]');
    if (!metaDescription) {
      metaDescription = document.createElement("meta");
      metaDescription.name = "description";
      document.head.appendChild(metaDescription);
    }
    metaDescription.content =
      product.etiqueta?.meta_descripcion || "Descripción por defecto";
    let metaKeywords = document.querySelector('meta[name="keywords"]');
    if (!metaKeywords) {
      metaKeywords = document.createElement("meta");
      metaKeywords.name = "keywords";
      document.head.appendChild(metaKeywords);
    }
    metaKeywords.content = product.etiqueta?.keywords || "";

    let metaKeywords = document.querySelector('meta[name="keywords"]');
    if (!metaKeywords) {
      metaKeywords = document.createElement("meta");
      metaKeywords.name = "keywords";
      document.head.appendChild(metaKeywords);
    }
    metaKeywords.content = product.etiqueta?.keywords || "";

    let canonicalLink = document.querySelector('link[rel="canonical"]');
    if (!canonicalLink) {
      canonicalLink = document.createElement("link");
      canonicalLink.rel = "canonical";
      document.head.appendChild(canonicalLink);
    }
    canonicalLink.href = `https://tamimaquinarias.com/productos/detalle?link=${encodeURIComponent(product.link)}`;

    productNameToIdMap[product.link] = product.id;
    localStorage.setItem(`product_${product.link}`, product.link);
  }

  // Cargar productos relacionados
  async function loadRelatedProducts(ids) {
    const container = document.getElementById("related-products-container");
    if (!container) return;
    container.innerHTML = "";
    const related = await Promise.all(
      ids.map(async (id) => {
        try {
          const res = await fetch(`${getApiUrl}${productosUrl.list}/${id}`);
          if (!res.ok) return null;
          return (await res.json()).data;
        } catch {
          return null;
        }
      })
    ).then((r) => r.filter(Boolean));

    related.forEach((prod) => {
      const a = document.createElement("a");
      a.href = `/productos/detalle?link=${encodeURIComponent(prod.link)}`;
      a.className = "group cursor-pointer";
      a.title = `Ver detalles de ${prod.titulo}`;
      const div = document.createElement("div");
      div.className =
        "aspect-video bg-white rounded-xl overflow-hidden mb-3 flex items-center justify-center border border-teal-100 shadow-sm transition-all duration-300 group-hover:shadow-lg";
      const img = document.createElement("img");
      img.src = `${getApiUrl}${prod.imagenes?.[0]?.url_imagen || "/placeholder.png"}`;
      img.alt = prod.titulo;
      img.title = prod.titulo;
      img.loading = "lazy";
      img.className =
        "w-full h-full object-contain transition-transform duration-300 group-hover:scale-102";
      const h3 = document.createElement("h3");
      h3.className =
        "text-center font-semibold text-sm md:text-base text-teal-700 mt-2 mb-1 drop-shadow-sm tracking-wide group-hover:text-teal-900 transition-colors duration-300";
      h3.textContent = prod.titulo;
      div.appendChild(img);
      a.appendChild(div);
      a.appendChild(h3);
      container.appendChild(a);
    });
  }

  // Enviar cotización a WhatsApp
  function sendWhatsAppQuoteRequest(product) {
    const numero = "51978883199";
    const mensaje = `Hola, quiero cotizar el producto: ${encodeURIComponent(product.titulo)}`;
    window.open(`https://wa.me/${numero}?text=${mensaje}`, "_blank");
  }

  // -------------------- EVENTOS --------------------
  document.addEventListener("DOMContentLoaded", async () => {
    showLoader();

    const params = new URLSearchParams(window.location.search);
    let productId = params.get("link")?.trim();

    if (!productId) {
      const slug = window.location.pathname.split("/").pop();
      productId = localStorage.getItem(`product_${slug}`);
    }

    if (!productId) {
      removeLoader();
      showErrorMessage("No se encontró el producto");
      return;
    }

    try {
      const res = await fetch(
        `${getApiUrl}${productosUrl.list}/link/${productId}`
      );
      if (!res.ok) throw new Error(`Error ${res.status}: ${res.statusText}`);
      const product = (await res.json()).data;
      window.__detalleProducto = product;
      window.__detalleProductoSeccion = product.seccion;
      window.__detalleProductoLink = product.link;
      console.log("Producto cargado - Link:", product.link);
      removeLoader();
      displayProductDetails(product);

      const images = [
        ...(product.imagenes?.map(
          (img) => `https://apitami.tamimaquinarias.com${img.url_imagen}`
        ) || []),
      ];

      const jsonLd = {
        "@context": "https://schema.org",
        "@type": "Product",
        name: product.nombre,
        image: images,
        description: product.descripcion,
        sku: `PROD-${product.id}`,
        brand: {
          "@type": "Brand",
          name: "Tami Maquinarias",
          logo: "https://tamimaquinarias.com/_astro/logo-estatico-100x116.B0Pf3Br1.webp",
          url: "https://tamimaquinarias.com/",
        },
        url: `https://tamimaquinarias.com/productos/detalle/?link=${encodeURIComponent(product.link)}`,
        category: product.seccion,
        review: [
          {
            "@type": "Review",
            author: {
              "@type": "Person",
              name: "Nilton Ramos",
            },
            datePublished: "2025-09-19",
            reviewBody: "Un excelente producto, seguramente volveré por más.",
            name: "Todo lo que necesito.",
            reviewRating: {
              "@type": "Rating",
              bestRating: "5",
              ratingValue: "4",
              worstRating: "1",
            },
          },
          {
            "@type": "Review",
            author: {
              "@type": "Person",
              name: "María López",
            },
            datePublished: "2025-08-10",
            reviewBody:
              "Muy buena calidad y entrega rápida. Recomiendo totalmente.",
            name: "Entrega rápida y confiable",
            reviewRating: {
              "@type": "Rating",
              bestRating: "5",
              ratingValue: "5",
              worstRating: "1",
            },
          },
          {
            "@type": "Review",
            author: {
              "@type": "Person",
              name: "Carlos Fernández",
            },
            datePublished: "2025-07-22",
            reviewBody:
              "Producto conforme a la descripción, buen soporte del vendedor.",
            name: "Satisfecho con la compra",
            reviewRating: {
              "@type": "Rating",
              bestRating: "5",
              ratingValue: "4",
              worstRating: "1",
            },
          },
        ],
        aggregateRating: {
          "@type": "AggregateRating",
          ratingValue: 88,
          bestRating: 100,
          ratingCount: 20,
        },
      };

      const script = document.createElement("script");
      script.type = "application/ld+json";
      script.innerHTML = JSON.stringify(jsonLd, null, 2);
      console.log(JSON.stringify(jsonLd, null, 2));
      document.head.appendChild(script);

      // Botones cotización → WhatsApp
      ["btnQuotationHero", "btnQuotationDetail"].forEach((id) => {
        const btn = document.getElementById(id);
        if (btn) btn.onclick = () => sendWhatsAppQuoteRequest(product);
      });

      // Productos relacionados
      if (product.productos_relacionados) {
        await loadRelatedProducts(
          product.productos_relacionados.map((p) => p.id)
        );
      }
    } catch (e) {
      console.error("Error fetching product:", e);
      removeLoader();
      showErrorMessage(`Error: ${e.message}`);
    }
  });
})();</script>
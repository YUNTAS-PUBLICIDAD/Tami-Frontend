import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r as d}from"./index.DtoOFyvK.js";import{F as K,f as Q,g as X,a as Y,d as Z}from"./index.BT90q9ig.js";import{g as k,c as P}from"./config.BD8tWXmp.js";import{S as g}from"./sweetalert2.esm.all.Y6IUEg8t.js";const ee=({onBlogAdded:D,isOpen:f,onClose:x,blogToEdit:o})=>{const[j,I]=d.useState(!1),[E,b]=d.useState(!1),[_,L]=d.useState([]),[z,C]=d.useState(!1),[S,v]=d.useState(""),[w,$]=d.useState(""),[p,y]=d.useState(null),[F,q]=d.useState(!1),[t,c]=d.useState({titulo:"",link:"",subtitulo1:"",subtitulo2:"",video_url:"",video_titulo:"",producto_id:"",miniatura:null,imagenes:[{imagen:null,parrafo:""},{imagen:null,parrafo:""}],etiqueta:{meta_titulo:"",meta_descripcion:""}});d.useEffect(()=>{f!==void 0&&I(f)},[f]),d.useEffect(()=>{if(!j)return;if((async()=>{try{const r=k(P.endpoints.productos.list),n=await(await fetch(r,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}})).json();let i=[];Array.isArray(n)?i=n:Array.isArray(n?.data)?i=n.data:Array.isArray(n?.data?.productos)&&(i=n.data.productos),L(i)}catch(r){console.error("üö´ Error en FETCH productos:",r),L([])}})(),o){const r=_.find(s=>s.nombre===o.nombre_producto);c({titulo:o.titulo||"",link:o.link||"",subtitulo1:o.subtitulo1||"",subtitulo2:o.subtitulo2||"",video_url:o.video_url||"",video_titulo:o.video_titulo||"",producto_id:r?String(r.id):"",miniatura:o.miniatura||null,imagenes:o.imagenes?.map((s,n)=>{const i=s.ruta_imagen||"";return{imagen:null,parrafo:o.parrafos?.[n]?.parrafo||"",url:i?i.startsWith("http")?i:`https://apitami.tamimaquinarias.com${i}`:""}})||[{imagen:null,parrafo:"",url:""},{imagen:null,parrafo:"",url:""}],etiqueta:{meta_titulo:o.etiqueta?.meta_titulo||"",meta_descripcion:o.etiqueta?.meta_descripcion||""}})}else c({titulo:"",link:"",subtitulo1:"",subtitulo2:"",video_url:"",video_titulo:"",producto_id:"",miniatura:null,imagenes:[{imagen:null,parrafo:""},{imagen:null,parrafo:""}],etiqueta:{meta_titulo:"",meta_descripcion:""}})},[j,o]);const h=a=>{const{name:r,value:s}=a.target;if(r==="link"){const n=s.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase().replaceAll(" ","-");c(i=>({...i,link:n}))}else c(r==="producto_id"?n=>({...n,producto_id:s}):n=>({...n,[r]:s}))},O=a=>{a.target.files&&a.target.files[0]&&c({...t,miniatura:a.target.files[0]})},V=(a,r)=>{if(a.target.files&&a.target.files[0]){const s=[...t.imagenes];s[r]={...s[r],imagen:a.target.files[0]},c({...t,imagenes:s})}},R=(a,r)=>{const s=[...t.imagenes];s[r]={...s[r],parrafo:a.target.value},c({...t,imagenes:s})},U=a=>{const r=document.getElementById(`crear_descripcion_antes_${a}`),s=r.selectionStart,n=r.selectionEnd,i=r.value.substring(s,n);if(!i){g.fire("Selecciona texto","Por favor selecciona el texto al que quieres agregar un enlace.","warning");return}y(a),v(i),C(!0)},W=a=>{const r=document.getElementById(`crear_descripcion_antes_${a}`),s=r.selectionStart,n=r.selectionEnd,i=r.value.substring(s,n);if(!i){g.fire("Selecciona texto","Por favor selecciona una palabra o frase para enlazar a un producto.","warning");return}y(a),v(i),q(!0)},l=()=>{if(p===null)return;if(!t.producto_id){g.fire("ID de producto vac√≠o","Debes ingresar un ID v√°lido.","error");return}const a=_.find(J=>String(J.id)===String(t.producto_id));if(!a?.link){g.fire("Producto no encontrado","No se encontr√≥ el producto.","error");return}const r=document.getElementById(`crear_descripcion_antes_${p}`),s=r.selectionStart,n=r.selectionEnd,i=t.imagenes[p]?.parrafo||"",B=i.substring(0,s),N=i.substring(n),M=`<a href="${`/productos/detalle?link=${a.link}`}" style="text-decoration: underline;">${S}</a>`,G=B+M+N,H=[...t.imagenes];H[p]={...H[p],parrafo:G},c(J=>({...J,imagenes:H})),q(!1),v(""),y(null)},u=()=>{if(p===null)return;if(!w.trim()){g.fire("Enlace vac√≠o","Debes ingresar un enlace v√°lido.","error");return}const a=document.getElementById(`crear_descripcion_antes_${p}`),r=a.selectionStart,s=a.selectionEnd,n=t.imagenes[p]?.parrafo||"",i=n.substring(0,r),B=n.substring(s),N=`<a href="${w}" style="text-decoration: underline;">${S}</a>`,T=i+N+B,M=[...t.imagenes];M[p]={...M[p],parrafo:T},c(G=>({...G,imagenes:M})),C(!1),$(""),v(""),y(null)},m=()=>{I(!1),c({titulo:"",link:"",subtitulo1:"",subtitulo2:"",video_url:"",video_titulo:"",producto_id:"",miniatura:null,imagenes:[{imagen:null,parrafo:""},{imagen:null,parrafo:""}],etiqueta:{meta_titulo:"",meta_descripcion:""}})},A=async a=>{if(a.preventDefault(),b(!0),!t.titulo||!t.link||!t.subtitulo1||!t.subtitulo2||!t.video_url||!t.video_titulo||!t.producto_id||!o&&!t.miniatura||t.imagenes.some(r=>!o&&!r.imagen||!r.parrafo)){g.fire({icon:"warning",title:"Campos obligatorios",text:"‚ö†Ô∏è Todos los campos son obligatorios."}),b(!1);return}try{const r=localStorage.getItem("token"),s=new FormData;s.append("titulo",t.titulo),s.append("link",t.link),s.append("subtitulo1",t.subtitulo1),s.append("subtitulo2",t.subtitulo2),s.append("video_url",t.video_url),s.append("video_titulo",t.video_titulo),s.append("etiqueta[meta_titulo]",t.etiqueta.meta_titulo),s.append("etiqueta[meta_descripcion]",t.etiqueta.meta_descripcion),s.append("producto_id",t.producto_id.toString()),t.miniatura instanceof File&&s.append("miniatura",t.miniatura),t.imagenes.forEach(N=>{N.imagen&&s.append("imagenes[]",N.imagen),s.append("parrafos[]",N.parrafo),s.append("text_alt[]","Sin descripci√≥n")}),s.append("etiqueta",JSON.stringify({meta_titulo:t.etiqueta.meta_titulo,meta_descripcion:t.etiqueta.meta_descripcion})),o&&s.append("_method","PUT");const n=o?`${k(P.endpoints.blogs.list)}/${o.id}`:k(P.endpoints.blogs.create),i=await fetch(n,{method:"POST",headers:{Authorization:`Bearer ${r}`},body:s}),B=await i.json();console.log("Respuesta del servidor:",B),i.ok?(await g.fire({icon:"success",title:o?"Blog actualizado exitosamente":"Blog a√±adido exitosamente",showConfirmButton:!0}),m(),D()):g.fire({icon:"error",title:"Error",text:`‚ùå Error: ${B.message||"Error al guardar blog"}`})}catch(r){console.error("Error al enviar los datos:",r),g.fire({icon:"error",title:"Error",text:`‚ùå ${r}`})}finally{b(!1)}};return e.jsx(e.Fragment,{children:(j||f)&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black/50 z-50",children:e.jsxs("div",{className:"max-h-[90vh] overflow-y-auto bg-white text-gray-800 p-8 rounded-xl w-full max-w-4xl shadow-2xl",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-3xl font-bold text-teal-600",children:o?"Editar Blog":"A√±adir Nuevo Blog"}),e.jsx("button",{type:"button",onClick:x||m,className:"text-gray-500 hover:text-gray-700 text-2xl",children:"√ó"})]}),e.jsxs("form",{encType:"multipart/form-data",onSubmit:A,className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"T√≠tulo*"}),e.jsx("input",{type:"text",name:"titulo",value:t.titulo,onChange:h,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500 transition"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Link*"}),e.jsx("input",{type:"text",name:"link",value:t.link,onChange:h,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500 transition"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Meta t√≠tulo"}),e.jsx("input",{type:"text",name:"meta_titulo",value:t.etiqueta.meta_titulo,onChange:a=>c({...t,etiqueta:{...t.etiqueta,meta_titulo:a.target.value}}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Meta descripci√≥n"}),e.jsx("textarea",{name:"meta_descripcion",value:t.etiqueta.meta_descripcion,onChange:a=>c({...t,etiqueta:{...t.etiqueta,meta_descripcion:a.target.value}}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"P√°rrafo*"}),e.jsx("input",{type:"text",name:"subtitulo1",value:t.subtitulo1,onChange:h,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500 transition"})]}),e.jsxs("div",{className:"md:col-span-2 space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Descripci√≥n*"}),e.jsx("input",{type:"text",name:"subtitulo2",value:t.subtitulo2,onChange:h,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500 transition"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"T√≠tulo Video*"}),e.jsx("input",{type:"text",name:"video_titulo",value:t.video_titulo,onChange:h,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500 transition"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"URL del Video*"}),e.jsx("input",{type:"text",name:"video_url",value:t.video_url,onChange:h,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500 transition"})]}),e.jsxs("div",{className:"md:col-span-2 space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Producto*"}),e.jsxs("select",{name:"producto_id",value:t.producto_id,onChange:h,required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500 transition",children:[e.jsx("option",{value:"",children:"Selecciona un producto"}),_.map(a=>e.jsx("option",{value:String(a.id),children:a.nombre},a.id))]})]}),e.jsxs("div",{className:"md:col-span-2 space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Miniatura*"}),t.miniatura instanceof File?e.jsx("img",{src:URL.createObjectURL(t.miniatura),alt:"Vista previa miniatura",className:"w-32 h-32 object-cover rounded-md border mb-2"}):typeof t.miniatura=="string"&&t.miniatura?e.jsx("img",{src:String(t.miniatura).startsWith("http")?String(t.miniatura):`https://apitami.tamimaquinarias.com${t.miniatura}`,alt:"Miniatura actual",className:"w-32 h-32 object-cover rounded-md border mb-2"}):null,e.jsx("input",{type:"file",accept:"image/*",onChange:O,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500 transition"})]}),t.imagenes.map((a,r)=>e.jsxs("div",{className:"md:col-span-2 space-y-2",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:["Imagen Adicional ",r+1,"*"]}),a.imagen instanceof File?e.jsx("img",{src:URL.createObjectURL(a.imagen),alt:`Vista previa imagen ${r+1}`,className:"w-32 h-32 object-cover rounded-md border mb-2"}):a.url?e.jsx("img",{src:a.url.startsWith("http")?a.url:`https://apitami.tamimaquinarias.com${a.url}`,alt:`Imagen adicional ${r+1}`,className:"w-32 h-32 object-cover rounded-md border mb-2"}):null,e.jsx("div",{className:"flex items-center gap-4 mb-2",children:e.jsx("label",{className:"flex-1 cursor-pointer",children:e.jsxs("div",{className:"px-4 py-2 border-2 border-dashed border-gray-300 rounded-lg hover:border-teal-500 transition",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:s=>V(s,r),className:"hidden"}),e.jsx("p",{className:"text-center text-gray-500",children:a.imagen instanceof File?a.imagen.name:"Seleccionar archivo"})]})})}),e.jsxs("div",{className:"md:col-span-2 space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Descripci√≥n Completa*"}),e.jsxs("div",{className:"relative",children:[e.jsx("textarea",{name:"descripcionAntes",id:`crear_descripcion_antes_${r}`,rows:5,value:t.imagenes[r]?.parrafo||"",onChange:s=>R(s,r),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500 transition resize-none",placeholder:"Escribe aqu√≠ toda la descripci√≥n del blog...",required:!0}),e.jsxs("div",{className:"absolute top-2/3 right-2 flex gap-2",children:[e.jsx("button",{type:"button",onClick:()=>U(r),title:"Insertar enlace",className:"bg-blue-500 hover:bg-blue-700 text-white p-2 rounded-full shadow-lg transition-all duration-200",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})})}),e.jsx("button",{type:"button",onClick:()=>W(r),title:"Enlazar a producto",className:"bg-green-500 hover:bg-green-700 text-white p-2 rounded-full shadow-lg transition-all duration-200",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})})})]})]}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Selecciona texto y haz clic en:",e.jsx("span",{className:"mx-2",children:"üîó para enlace normal"}),e.jsx("span",{className:"mx-2",children:"üõí para enlace a producto"})]})]})]},r)),e.jsxs("div",{className:"md:col-span-2 flex justify-end gap-4",children:[e.jsx("button",{type:"button",onClick:x||m,className:"px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-100 transition",children:"Cancelar"}),e.jsx("button",{type:"submit",className:"px-6 py-2 bg-teal-600 text-white rounded-lg hover:bg-teal-700 transition shadow-md flex items-center justify-center gap-2 min-w-[140px]",disabled:E,children:E?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8z"})]}),"Guardando..."]}):o?"Actualizar Blog":"Guardar Blog"})]})]}),z&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg w-full max-w-sm",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4",children:['Insertar enlace para "',S,'"']}),e.jsx("input",{type:"url",placeholder:"https://ejemplo.com",value:w,onChange:a=>$(a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded mb-4"}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{onClick:()=>C(!1),className:"px-4 py-2 bg-gray-300 rounded",children:"Cancelar"}),e.jsx("button",{onClick:u,className:"px-4 py-2 bg-blue-600 text-white rounded",children:"Insertar"})]})]})}),F&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg w-full max-w-2xl max-h-[80vh] overflow-y-auto",children:[e.jsxs("h3",{className:"text-xl font-bold mb-4",children:['Enlazar "',S,'" a producto:']}),e.jsxs("select",{name:"producto_id",value:t.producto_id,onChange:h,required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500 transition",children:[e.jsx("option",{value:"",children:"Selecciona un producto"}),_.map(a=>e.jsxs("option",{value:a.id,children:[" ",a.nombre]},a.id))]}),e.jsxs("div",{className:"flex justify-end gap-2 p-6",children:[e.jsx("button",{onClick:()=>q(!1),className:"px-4 py-2 bg-gray-300 rounded",children:"Cancelar"}),e.jsx("button",{onClick:l,className:"px-4 py-2 bg-blue-600 text-white rounded",children:"Insertar"})]})]})})]})})})},oe=()=>{const[D,f]=d.useState([]),[x,o]=d.useState(1),[j,I]=d.useState(""),[E,b]=d.useState(!1),[_,L]=d.useState(!0),[z,C]=d.useState(null),[S,v]=d.useState(null),w=6,$=async()=>{L(!0);try{const u=await(await fetch(k(P.endpoints.blogs.list))).json();Array.isArray(u?.data)?f(u.data):(console.warn("‚ö†Ô∏è 'data' no es un array v√°lido:",u?.data),f([]))}catch(l){console.error("‚ùå Error al cargar datos:",l),f([])}finally{L(!1)}};d.useEffect(()=>{$()},[]);const p=()=>{$(),b(!1)},y=D.filter(l=>l.titulo.toLowerCase().includes(j.toLowerCase())||l.subtitulo2.toLowerCase().includes(j.toLowerCase())),F=x*w,q=F-w,t=y.slice(q,F),c=Math.ceil(y.length/w),h=async l=>{const u=localStorage.getItem("token");if((await g.fire({title:"¬øEst√°s seguro de que deseas eliminar este blog?",icon:"warning",showCancelButton:!0,confirmButtonText:"S√≠, eliminar",cancelButtonText:"Cancelar"})).isConfirmed)try{(await fetch(k(P.endpoints.blogs.delete(l)),{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:`Bearer ${u}`}})).ok?(f(a=>a.filter(r=>r.id!==l)),await g.fire("Eliminado","Blog eliminado exitosamente","success")):await g.fire("Error","Error al eliminar el blog","error")}catch(A){console.error("Error al eliminar:",A),await g.fire("Error","Error al conectar con el servidor","error")}},O=()=>{b(!0)},V=l=>{v(l),b(!0)},R=l=>{C(l)},U=()=>{C(null)},W=({blog:l,onClose:u})=>l?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-4xl w-full max-h-screen overflow-y-auto",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:`${k("")}${l.imagenes[0]?.ruta_imagen}`,alt:l.titulo,className:"w-full h-64 object-cover rounded-t-xl"}),e.jsx("button",{onClick:u,className:"absolute top-4 right-4 bg-white rounded-full p-2 shadow-lg",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-3xl font-bold text-teal-700 mb-2",children:l.titulo}),e.jsx("p",{className:"text-gray-500 mb-4",children:l.created_at?new Date(l.created_at).toLocaleDateString():"Fecha no disponible"}),e.jsxs("div",{className:"prose max-w-none",children:[e.jsx("h3",{className:"text-xl font-semibold text-teal-600 mb-2",children:l.subtitulo1}),e.jsxs("div",{className:"my-6",children:[e.jsx("h4",{className:"text-lg font-medium text-teal-600 mb-2",children:"Acerca de este blog"}),e.jsx("p",{className:"text-gray-700",children:l.subtitulo2})]}),l.parrafos?.map((m,A)=>e.jsx("p",{className:"text-gray-700 mb-4",children:m.parrafo},A)),l.video_id?.trim()&&e.jsxs("div",{className:"my-6",children:[e.jsx("h4",{className:"text-lg font-medium text-teal-600 mb-2",children:l.video_titulo||"Video relacionado"}),e.jsx("div",{className:"aspect-w-16 aspect-h-9",children:e.jsx("iframe",{src:`https://www.youtube.com/embed/${l.video_id.trim()}`,className:"w-full h-64 rounded-lg",allowFullScreen:!0})})]})]})]})]})}):null;return e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 min-h-screen pb-12 sm:pb-16 md:pb-20 lg:pb-24 xl:pb-28",children:[e.jsx("div",{className:"bg-gradient-to-r from-teal-600 to-teal-400 text-white p-8 shadow-md",children:e.jsxs("div",{className:"container mx-auto",children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Gesti√≥n de Blog"}),e.jsx("p",{className:"text-teal-50",children:"Administra todas las publicaciones del blog de tu empresa"})]})}),e.jsx("div",{className:"container mx-auto px-4 -mt-6",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between mb-6 gap-4",children:[e.jsxs("div",{className:"relative flex-grow max-w-md",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(K,{className:"text-gray-400 dark:text-gray-300"})}),e.jsx("input",{type:"text",className:"pl-10 pr-4 py-2 w-full border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-800 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400 focus:ring-teal-500 focus:border-teal-500",placeholder:"Buscar blogs...",value:j,onChange:l=>I(l.target.value)})]}),e.jsxs("button",{type:"button",onClick:O,className:"flex items-center gap-2 bg-teal-600 text-white px-4 py-2 rounded-full shadow hover:bg-teal-700 flex-shrink-0",children:[e.jsx(Q,{}),"A√±adir Blog"]}),e.jsx(ee,{onBlogAdded:p,isOpen:E,onClose:()=>{b(!1),v(null)},blogToEdit:S})]}),_?e.jsx("div",{className:"flex justify-center items-center py-20",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-teal-500"})}):t.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(l=>e.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-100 dark:border-gray-700 rounded-xl shadow-sm hover:shadow-md transition-shadow overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"relative h-48",children:[e.jsx("img",{src:`${k("")}${l.imagenes[0]?.ruta_imagen}`,alt:l.titulo,className:"w-full h-full object-cover"}),e.jsxs("div",{className:"absolute top-0 right-0 m-2 flex space-x-1",children:[e.jsx("button",{onClick:()=>R(l),className:"p-2 bg-white dark:bg-gray-900 rounded-full hover:bg-teal-50 dark:hover:bg-gray-700 text-teal-600 shadow-md",title:"Vista previa",children:e.jsx(X,{size:16})}),e.jsx("button",{className:"p-2 bg-white dark:bg-gray-900 rounded-full hover:bg-yellow-50 dark:hover:bg-gray-700 text-yellow-600 shadow-md",title:"Editar",onClick:()=>V(l),children:e.jsx(Y,{size:16})}),e.jsx("button",{onClick:()=>h(l.id),className:"p-2 bg-white dark:bg-gray-900 rounded-full hover:bg-red-50 dark:hover:bg-gray-700 text-red-600 shadow-md",title:"Eliminar",children:e.jsx(Z,{size:16})})]})]}),e.jsxs("div",{className:"p-5 flex-grow flex flex-col",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-2 line-clamp-1",children:l.titulo}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm mb-3 line-clamp-2",children:l.subtitulo2}),e.jsxs("div",{className:"mt-auto pt-4 flex justify-between items-center",children:[e.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:["ID: ",l.id]}),e.jsx("span",{className:"px-3 py-1 bg-teal-50 dark:bg-teal-800 text-teal-600 dark:text-teal-200 rounded-full text-xs font-medium",children:"Blog"})]})]})]},l.id))}):e.jsxs("div",{className:"text-center py-12 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400 dark:text-gray-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),e.jsx("h3",{className:"mt-2 text-lg font-medium text-gray-900 dark:text-gray-100",children:"No se encontraron blogs"}),e.jsx("p",{className:"mt-1 text-gray-500 dark:text-gray-400",children:"Intenta con otra b√∫squeda o crea un nuevo blog."})]}),y.length>0&&e.jsxs("div",{className:"flex justify-center gap-2 mt-8",children:[e.jsx("button",{onClick:()=>o(l=>Math.max(l-1,1)),disabled:x===1,className:"px-3 py-1 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-md hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 text-sm text-gray-700 dark:text-gray-200",children:"Anterior"}),Array.from({length:Math.min(c,5)},(l,u)=>{let m;return c<=5||x<=3?m=u+1:x>=c-2?m=c-4+u:m=x-2+u,e.jsx("button",{onClick:()=>o(m),className:`px-3 py-1 border rounded-md text-sm ${x===m?"bg-teal-500 text-white border-teal-500":"bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-200 border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:m},u)}),e.jsx("button",{onClick:()=>o(l=>Math.min(l+1,c)),disabled:x===c,className:"px-3 py-1 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-md hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 text-sm text-gray-700 dark:text-gray-200",children:"Siguiente"})]})]})}),z&&e.jsx(W,{blog:z,onClose:U})]})};export{oe as default};

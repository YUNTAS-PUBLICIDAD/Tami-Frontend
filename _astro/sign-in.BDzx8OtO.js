import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r as l}from"./index.BmW6Ki2V.js";import{g,c as f}from"./config.BZJ3FbET.js";import{S as c}from"./sweetalert2.esm.all.BbQndx0i.js";const h="/_astro/logo-blanco-tami.BqjAaMyp.gif",b={src:"/_astro/login_bg.CHvLnTHI.jpg"},v=()=>{const[r,s]=l.useState(!1),[o,d]=l.useState(null),m=async n=>{n.preventDefault();const i=new FormData(n.currentTarget),u=String(i.get("email")||""),x=String(i.get("password")||"");s(!0);try{const a=await fetch(g(f.endpoints.auth.login),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:u,password:x})}),t=await a.json();if(a.ok){localStorage.setItem("token",t.data.token);const p={name:t.data.user?.name||t.data.user?.username||t.data.user?.email?.split("@")[0]||"Usuario",role:t.data.user?.role||t.data.user?.rol||t.data.user?.tipo||"Usuario"};localStorage.setItem("userInfo",JSON.stringify(p)),window.location.href="/admin/inicio"}else c.fire({icon:"error",title:"Error",text:t.message||"Error al iniciar sesión"})}catch{c.fire({icon:"error",title:"Error",text:"Error de conexión con el servidor."})}finally{s(!1),d(null)}};return e.jsxs("div",{className:"min-h-screen w-full flex flex-col justify-center items-center relative bg-cover bg-center",style:{backgroundImage:`url(${b.src})`},children:[e.jsx("a",{href:"/",title:"Regresar a la página de inicio",className:"absolute top-2 left-2 bg-red-700 text-white font-semibold rounded-2xl px-5 py-2 hover:bg-red-900 transition-colors duration-200 drop-shadow-lg opacity-70 hover:opacity-100",children:"Regresar"}),e.jsxs("div",{className:"text-center mb-8 relative z-10",children:[e.jsx("img",{loading:"lazy",src:h,alt:"TAMI Logo",className:"w-26 mx-auto mb-6"}),e.jsx("h1",{className:"text-white text-4xl md:text-5xl font-black",children:"¡BIENVENIDO!"})]}),e.jsxs("form",{className:"space-y-4 w-full max-w-2xs md:max-w-md relative z-10",onSubmit:m,children:[o&&e.jsx("p",{className:"text-red-500 text-center",children:o}),e.jsx("div",{children:e.jsx("input",{type:"email",name:"email",className:"w-full p-3 bg-white/70 text-sm rounded-2xl text-gray-700 font-semibold placeholder-gray-400 focus:outline-none px-6",placeholder:"EMAIL",required:!0})}),e.jsx("div",{children:e.jsx("input",{type:"password",name:"password",className:"w-full p-3 bg-white/70 text-sm rounded-2xl text-gray-700 font-semibold placeholder-gray-400 focus:outline-none px-6 mb-2",placeholder:"CONTRASEÑA",required:!0})}),e.jsx("div",{className:"flex justify-center",children:e.jsx("button",{type:"submit",disabled:r,"aria-busy":r,className:"w-3/5 md:w-2/5 bg-teal-600 text-white p-2 rounded-3xl text-base font-bold hover:bg-teal-700 transition hover:cursor-pointer disabled:opacity-50 disabled:hover:cursor-not-allowed flex items-center justify-center",children:r?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-5 h-5 border-2 border-blue-100 border-t-transparent rounded-full animate-spin"}),e.jsx("span",{className:"ml-2",children:"CARGANDO"})]}):"INGRESAR"})})]})]})};export{v as default};

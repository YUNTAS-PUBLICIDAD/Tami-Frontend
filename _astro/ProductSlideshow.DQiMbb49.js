import{j as t}from"./jsx-runtime.D_zvdyIk.js";import{c as f,g as m}from"./config.BBxWIZNq.js";import{r as o}from"./index.DtoOFyvK.js";const u=f.apiUrl;function b(s){return s.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/\s+/g,"-")}const y=()=>{const[s,a]=o.useState([]),[p,n]=o.useState(!0),[i,c]=o.useState(0),[h,x]=o.useState(!1);if(o.useEffect(()=>{(async()=>{n(!0);try{const l=await fetch(m(f.endpoints.productos.list));if(!l.ok)throw new Error(`Error en la petición: ${l.status}`);const g=await l.json();a(g.slice(-3))}catch(l){console.error("Error al obtener los productos:",l),a([])}finally{n(!1)}})();const r=()=>x(window.innerWidth<640);return r(),window.addEventListener("resize",r),()=>window.removeEventListener("resize",r)},[]),s.length===0)return null;const d=e=>`/productos/detalle?link=${e.link??b(e.titulo)}`;return h?p?t.jsxs("div",{className:"w-full flex justify-center items-center h-64",children:[t.jsx("div",{className:"animate-spin rounded-full h-9 w-9 border-t-2 border-b-2 border-teal-500"}),t.jsx("span",{className:"text-teal-500 font-medium",children:"Cargando productos..."})]}):t.jsxs("div",{className:"flex justify-center px-8 mb-20 relative min-h-[280px] h-[320px]",children:[s.map((e,r)=>t.jsxs("div",{className:`w-72 p-6 bg-gradient-to-b to-white flex flex-col items-center text-center transition-all duration-500 absolute ${i===r?"opacity-100 scale-100 relative":"opacity-0 scale-95 pointer-events-none"}`,children:[t.jsx("img",{src:(()=>{if(e.imagenes[0]?.url_imagen instanceof File)return URL.createObjectURL(e.imagenes[0].url_imagen);const l=e.imagenes[0]?.url_imagen;return typeof l=="string"?l.startsWith("http")?l:`${u.replace(/\/$/,"")}${l}`:`https://placehold.co/300x300/orange/white?text=${encodeURIComponent(e.titulo)}`})(),alt:e.titulo,title:e.titulo,className:"w-32 h-32 rounded-2xl object-cover mb-4"}),t.jsx("h3",{className:"text-xl font-bold text-teal-600 tracking-wide mb-2",children:e.titulo}),t.jsx("a",{href:d(e),className:"mt-2 bg-teal-700 hover:bg-teal-800 text-white px-4 py-2 rounded-full transition-all",children:"Información"})]},e.id)),t.jsx("button",{onClick:()=>c(e=>(e-1+s.length)%s.length),className:"absolute left-4 top-1/2 transform -translate-y-1/2 bg-teal-600 text-white p-2 rounded-full shadow-md",children:"←"}),t.jsx("button",{onClick:()=>c(e=>(e+1)%s.length),className:"absolute right-4 top-1/2 transform -translate-y-1/2 bg-teal-600 text-white p-2 rounded-full shadow-md",children:"→"}),t.jsx("div",{className:"absolute bottom-[-1.5rem] left-1/2 -translate-x-1/2 flex gap-2",children:s.map((e,r)=>t.jsx("span",{className:`h-3 w-3 rounded-full bg-gray-300 ${i===r?"bg-teal-600":""}`},r))})]}):t.jsx("div",{className:"w-full grid grid-cols-3 gap-8 overflow-x-auto lg:overflow-visible scroll-smooth px-4 mb-20",children:s.map(e=>t.jsx("div",{className:"bg-gradient-to-b to-white text-center justify-items-center text-teal-700 h-full group relative flex flex-col items-center p-6 transition-all duration-300 hover:cursor-pointer",children:t.jsxs("a",{href:d(e),title:"Información del producto",className:"w-full h-full font-extrabold text-xl flex flex-col items-center gap-6",children:[t.jsx("img",{src:(()=>{if(e.imagenes[0]?.url_imagen instanceof File)return URL.createObjectURL(e.imagenes[0].url_imagen);const r=e.imagenes[0]?.url_imagen;return typeof r=="string"?r.startsWith("http")?r:`${u.replace(/\/$/,"")}${r}`:`https://placehold.co/300x300/orange/white?text=${encodeURIComponent(e.titulo)}`})(),alt:e.titulo,title:e.titulo,className:"w-4/5 place-self-center transition-transform duration-300 ease-in-out mb-10 group-hover:scale-100"}),t.jsx("h3",{className:"text-xl font-bold text-teal-700 tracking-wide",children:e.titulo}),t.jsx("div",{className:"my-8 place-self-center border border-teal-700 rounded-full px-5 py-2 w-fit group-hover:cursor-pointer group-hover:bg-teal-700 group-hover:text-white transition-colors duration-300",children:"Información"})]})},e.id))})};export{y as default};

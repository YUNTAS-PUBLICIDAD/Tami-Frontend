import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r as d}from"./index.DtoOFyvK.js";import{g,c as u}from"./config.BD8tWXmp.js";import{S as m}from"./sweetalert2.esm.all.Y6IUEg8t.js";const f="/_astro/logo-blanco-tami.BqjAaMyp.gif",h={src:"/_astro/login_bg.CHvLnTHI.jpg"},N=()=>{const[t,o]=d.useState(!1),[a,x]=d.useState(null),p=async n=>{n.preventDefault();const i=new FormData(n.currentTarget),l=String(i.get("email")||""),c=String(i.get("password")||"");console.log("Intentando iniciar sesión con:",l,c),o(!0);try{const r=await fetch(g(u.endpoints.auth.login),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:l,password:c})}),s=await r.json();r.ok?(localStorage.setItem("token",s.data.token),window.location.href="/admin/inicio"):(console.error("Error en la respuesta del servidor:",s.message),m.fire({icon:"error",title:"Error",text:s.message||"Error al iniciar sesión"}))}catch{m.fire({icon:"error",title:"Error",text:"Error de conexión con el servidor."})}finally{o(!1),x(null)}};return e.jsxs("div",{className:"min-h-screen w-full flex flex-col justify-center items-center relative bg-cover bg-center",style:{backgroundImage:`url(${h.src})`},children:[e.jsx("a",{href:"/",title:"Regresar a la página de inicio",className:"absolute top-2 left-2 bg-red-700 text-white font-semibold rounded-2xl px-5 py-2 hover:bg-red-900 transition-colors duration-200 drop-shadow-lg opacity-70 hover:opacity-100",children:"Regresar"}),e.jsxs("div",{className:"text-center mb-8 relative z-10",children:[e.jsx("img",{loading:"lazy",src:f,alt:"TAMI Logo",className:"w-26 mx-auto mb-6"}),e.jsx("h1",{className:"text-white text-4xl md:text-5xl font-black",children:"¡BIENVENIDO!"})]}),e.jsxs("form",{className:"space-y-4 w-full max-w-2xs md:max-w-md relative z-10",onSubmit:p,children:[a&&e.jsx("p",{className:"text-red-500 text-center",children:a}),e.jsx("div",{children:e.jsx("input",{type:"email",name:"email",className:"w-full p-3 bg-white/70 text-sm rounded-2xl text-gray-700 font-semibold placeholder-gray-400 focus:outline-none px-6",placeholder:"EMAIL",required:!0})}),e.jsx("div",{children:e.jsx("input",{type:"password",name:"password",className:"w-full p-3 bg-white/70 text-sm rounded-2xl text-gray-700 font-semibold placeholder-gray-400 focus:outline-none px-6 mb-2",placeholder:"CONTRASEÑA",required:!0})}),e.jsx("div",{className:"flex justify-center",children:e.jsx("button",{type:"submit",disabled:t,"aria-busy":t,className:"w-3/5 md:w-2/5 bg-teal-600 text-white p-2 rounded-3xl text-base font-bold hover:bg-teal-700 transition hover:cursor-pointer disabled:opacity-50 disabled:hover:cursor-not-allowed flex items-center justify-center",children:t?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-5 h-5 border-2 border-blue-100 border-t-transparent rounded-full animate-spin"}),e.jsx("span",{className:"ml-2",children:"CARGANDO"})]}):"INGRESAR"})})]})]})};export{N as default};

import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r as d}from"./index.Be8AcK8B.js";import{g as G,c as M}from"./config.BZJ3FbET.js";import{g as ae,i as Y,j as se,h as re}from"./index.C7SCnFOA.js";import{G as Z}from"./iconBase.Db4UJpFa.js";import{S as b}from"./sweetalert2.esm.all.NNS-RXd7.js";import{L as oe,S as ie,T as ne,a as le,b as J,c as ce,d as de,e as A}from"./Table.B67SAcIV.js";const U={nombre:"",titulo:"",subtitulo:"",descripcion:"",link:"",stock:100,precio:199.99,seccion:"Negocio",especificaciones:[],etiqueta:{keywords:[""],meta_titulo:"",meta_descripcion:""},relacionados:[],imagenes:[{url_imagen:null,texto_alt_SEO:""},{url_imagen:null,texto_alt_SEO:""},{url_imagen:null,texto_alt_SEO:""},{url_imagen:null,texto_alt_SEO:""},{url_imagen:null,texto_alt_SEO:""}],textos_alt:[],dimensiones:{alto:"",largo:"",ancho:""},imagen_popup:null,texto_alt_popup:"",imagen_email:null,texto_alt_email:"",video_url:""};async function Q(){try{const n=localStorage.getItem("token"),w=G(M.endpoints.productos.list),u=await fetch(w,{method:"GET",headers:{Accept:"application/json",Authorization:`Bearer ${n}`}});if(!u.ok)throw new Error("Error al obtener productos");return await u.json()}catch(n){console.error("Error al obtener productos:",n)}}async function me(n){try{const w=localStorage.getItem("token");return(await fetch(G(M.endpoints.productos.delete(n)),{method:"DELETE",headers:{Authorization:`Bearer ${w}`,Accept:"application/json"}})).ok?"✅ Producto eliminado exitosamente":"❌ Error al eliminar el producto"}catch(w){return`Error al obtener productos: 
 ${w}`}}function ee(n){return Z({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 48C140.559 48 48 140.559 48 256c0 115.436 92.559 208 208 208 115.435 0 208-92.564 208-208 0-115.441-92.564-208-208-208zm104.002 282.881l-29.12 29.117L256 285.117l-74.881 74.881-29.121-29.117L226.881 256l-74.883-74.881 29.121-29.116L256 226.881l74.881-74.878 29.12 29.116L285.119 256l74.883 74.881z"},child:[]}]})(n)}function te(n){return n.toString().normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase().trim().replace(/\s+/g,"-").replace(/[^\w\-]+/g,"").replace(/\-\-+/g,"-")}const ue=({product:n,onProductUpdated:w})=>{const[u,j]=d.useState(!1),[k,N]=d.useState(!1),[h,_]=d.useState(1),[p,I]=d.useState(!1),[v,C]=d.useState([]),[q,r]=d.useState(""),[s,l]=d.useState(U),E=t=>{l({...s,[t.target.name]:t.target.value})},P=t=>{const{name:a,value:i}=t.target;l(m=>({...m,dimensiones:{...m.dimensiones,[a]:i}}))},S=(t,a)=>{t.target.checked?l({...s,relacionados:[...s.relacionados,a]}):l({...s,relacionados:s.relacionados.filter(i=>i!==a)})},c=()=>{l(t=>({...t,etiqueta:{...t.etiqueta,keywords:[...t.etiqueta.keywords,""]}}))},g=(t,a)=>{const i=[...s.etiqueta.keywords];i[t]=a.target.value,l(m=>({...m,etiqueta:{...m.etiqueta,keywords:i}}))},f=t=>{l(a=>({...a,etiqueta:{...a.etiqueta,keywords:a.etiqueta.keywords.filter((i,m)=>m!==t)}}))},B=(t,a)=>{const i=t.target.files?.[0];if(!i)return;const m=[...s.imagenes];m[a]={...m[a],url_imagen:i},l(L=>({...L,imagenes:m}))},W=(t,a)=>{if(t.target.value){const i=[...s.imagenes];i[a]={...i[a],texto_alt_SEO:t.target.value},l({...s,imagenes:i})}},$=d.useRef(null);function D(){N(!0)}function O(){_(1),N(!1),l(U)}function F(){I(!0),setTimeout(()=>{_(t=>t+1),I(!1),z()},500)}function R(){I(!0),setTimeout(()=>{_(t=>t-1),I(!1),z()},500)}function z(){$.current&&$.current.scrollTo({top:0,behavior:"smooth"})}const H=()=>{q.trim()&&(l(t=>({...t,especificaciones:[...t.especificaciones,q.trim()]})),r(""))},K=t=>{l(a=>({...a,especificaciones:a.especificaciones.filter((i,m)=>m!==t)}))},V=(t,a)=>{const i=[...s.especificaciones];i[t]=a,l(m=>({...m,especificaciones:i}))},o=async t=>{if(t.preventDefault(),j(!0),!s.nombre||!s.titulo||!s.subtitulo||!s.descripcion||!s.seccion||!s.imagenes||s.imagenes.every(a=>!a.url_imagen)){b.fire({icon:"warning",title:"Campos obligatorios",text:"⚠️ Todos los campos son obligatorios."}),j(!1);return}try{const a=localStorage.getItem("token"),i=new FormData;i.append("nombre",s.nombre),i.append("titulo",s.titulo),i.append("subtitulo",s.subtitulo);const m=te(s.titulo||s.nombre);i.append("link",m),i.append("descripcion",s.descripcion),i.append("stock",s.stock.toString()),i.append("precio",s.precio.toString()),i.append("seccion",s.seccion),i.append("especificaciones",JSON.stringify(s.especificaciones)),i.append("etiqueta[meta_titulo]",s.etiqueta.meta_titulo),i.append("etiqueta[meta_descripcion]",s.etiqueta.meta_descripcion),i.append("keywords",JSON.stringify(s.etiqueta.keywords)),i.append("dimensiones[alto]",s.dimensiones.alto),i.append("dimensiones[largo]",s.dimensiones.largo),i.append("dimensiones[ancho]",s.dimensiones.ancho),s.imagenes.forEach((y,T)=>{const X=y.texto_alt_SEO.trim()||"Texto SEO para imagen";y.url_imagen instanceof File?(i.append(`imagenes[${T}]`,y.url_imagen),i.append(`textos_alt[${T}]`,X)):typeof y.url_imagen=="string"&&y.url_imagen&&(i.append(`imagenes_existentes[${T}]`,y.url_imagen),i.append(`textos_alt[${T}]`,X))}),s.relacionados.forEach((y,T)=>{i.append(`relacionados[${T}]`,y.toString())}),s.imagen_popup&&(i.append("imagen_popup",s.imagen_popup),i.append("texto_alt_popup",s.texto_alt_popup||"")),s.imagen_email&&(i.append("imagen_email",s.imagen_email),i.append("texto_alt_email",s.texto_alt_email||"")),s.imagen_whatsapp&&(i.append("imagen_email",s.imagen_whatsapp),i.append("texto_alt_email",s.texto_alt_whatsapp||"")),s.video_url&&i.append("video_url",s.video_url),i.append("_method","PUT");const L=await fetch(G(M.endpoints.productos.update(n.id)),{method:"POST",body:i,headers:{Authorization:`Bearer ${a}`,Accept:"application/json"}}),x=await L.json();console.log("Respuesta del servidor:",x),L.ok?(b.fire({icon:"success",title:"Producto actualizado exitosamente",showConfirmButton:!1,timer:1500}),O(),await w?.(),j(!1)):(b.fire({icon:"error",title:"Error",text:x.message}),j(!1))}catch(a){console.error("Error al enviar los datos:",a),b.fire({icon:"error",title:"Error",text:`❌ Error: ${a}`}),j(!1)}};return d.useEffect(()=>{k&&(async()=>{try{const a=await Q();C(a)}catch(a){console.error("Error al obtener productos:",a)}})()},[k]),d.useEffect(()=>{if(k&&n){let t=n.imagenes?.map(x=>({url_imagen:`${M.apiUrl}${x.url_imagen}`,texto_alt_SEO:x.texto_alt_SEO||""}))||[];for(;t.length<5;)t.push({url_imagen:"",texto_alt_SEO:""});const a=n.productos_relacionados?.map(x=>x.id)||[],i=n.etiqueta?.keywords.split(",").map(x=>x.trim()),m=n.producto_imagenes?.find(x=>x.tipo==="popup"),L=n.producto_imagenes?.find(x=>x.tipo==="email");l({nombre:n.nombre,titulo:n.titulo,subtitulo:n.subtitulo,link:n.link,descripcion:n.descripcion,etiqueta:{keywords:i||[""],meta_titulo:n.etiqueta?.meta_titulo||"",meta_descripcion:n.etiqueta?.meta_descripcion||""},stock:n.stock,precio:n.precio,seccion:n.seccion,especificaciones:Array.isArray(n.especificaciones)?n.especificaciones.map(x=>x.valor):[],relacionados:a,imagenes:t,textos_alt:n.imagenes?.map(x=>x.texto_alt_SEO)||[],dimensiones:{largo:n.dimensiones?.largo||"",alto:n.dimensiones?.alto||"",ancho:n.dimensiones?.ancho||""},video_url:n.video_url||"",imagen_popup:m?`${M.apiUrl}${m.url_imagen}`:null,texto_alt_popup:m?.texto_alt_SEO||"",imagen_email:L?`${M.apiUrl}${L.url_imagen}`:null,texto_alt_email:L?.texto_alt_SEO||""})}},[k,n]),e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"p-2 text-green-600 hover:text-green-800 transition hover:cursor-pointer",title:"Editar",onClick:D,children:e.jsx(ae,{size:18})}),k&&e.jsxs("div",{className:"dialog-overlay",children:[e.jsx("button",{className:"absolute top-4 right-4 md:top-6 md:right-6 text-white hover:text-red-400 transition-all duration-300 hover:cursor-pointer text-3xl md:text-4xl",onClick:()=>O(),"aria-label":"Cerrar",children:e.jsx(ee,{})}),e.jsxs("div",{ref:$,className:"dialog max-h-[90vh] min-h-[70vh] md:min-h-[80vh]",children:[e.jsx("div",{className:"dialog-header",children:e.jsx("h4",{className:"dialog-title",children:"Editar Producto"})}),e.jsxs("form",{onSubmit:o,className:"relative",children:[e.jsxs("div",{className:`absolute w-full transition-all duration-500 ${p&&h===1?"-translate-x-full opacity-0 pointer-events-none":""} ${!p&&h===1?"translate-x-0 opacity-100 pointer-events-auto":"opacity-0 pointer-events-none"}`,children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"form-input",children:[e.jsx("label",{children:"Nombre:"}),e.jsx("input",{required:!0,value:s.nombre,onChange:E,type:"text",name:"nombre",placeholder:"Nombre del producto..."})]}),e.jsxs("div",{className:"form-input",children:[e.jsx("label",{children:"Descripción:"}),e.jsx("textarea",{required:!0,value:s.descripcion,onChange:E,name:"descripcion",placeholder:"Descripción del producto...",className:"min-h-[100px]"})]}),e.jsxs("div",{className:"form-input",children:[e.jsxs("label",{htmlFor:"meta_titulo",children:["Meta título ",e.jsx("span",{className:"text-gray-500",children:"(recomendado: 50-60 caracteres)"})]}),e.jsx("input",{type:"text",id:"meta_titulo",name:"meta_titulo",value:s.etiqueta.meta_titulo,onChange:t=>l(a=>({...a,etiqueta:{...a.etiqueta,meta_titulo:t.target.value}})),maxLength:70}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[s.etiqueta.meta_titulo.length," / 70 caracteres"]})]}),e.jsxs("div",{className:"form-input",children:[e.jsxs("label",{htmlFor:"meta_descripcion",children:["Meta descripción ",e.jsx("span",{className:"text-gray-500",children:"(recomendado: 40-160 caracteres)"})]}),e.jsx("textarea",{id:"meta_descripcion",name:"meta_descripcion",value:s.etiqueta.meta_descripcion,onChange:t=>l(a=>({...a,etiqueta:{...a.etiqueta,meta_descripcion:t.target.value}})),maxLength:200,rows:3}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[s.etiqueta.meta_descripcion.length," / 200 caracteres"]})]}),e.jsxs("div",{className:"card",children:[e.jsx("h4",{className:"font-medium text-gray-700 dark:text-gray-400 mb-3",children:"Keywords:"}),s.etiqueta.keywords.map((t,a)=>e.jsxs("div",{className:"form-input flex justify-between gap-2",children:[e.jsx("input",{type:"text",id:"keywords",value:t,onChange:i=>g(a,i)}),e.jsx("button",{type:"button",disabled:a===0,onClick:()=>f(a),className:"text-red-600 hover:cursor-pointer disabled:opacity-20 disabled:cursor-not-allowed",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})),e.jsxs("button",{type:"button",onClick:c,className:"inline-flex items-center gap-1 bg-teal-50 hover:bg-teal-100 text-teal-700 px-3 py-2 rounded-lg text-sm font-medium transition-colors",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Añadir keyword"]})]}),e.jsxs("div",{className:"form-input",children:[e.jsx("label",{children:"Título:"}),e.jsx("input",{required:!0,value:s.titulo,onChange:E,type:"text",name:"titulo",placeholder:"Título...",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent outline-none transition"})]}),e.jsxs("div",{className:"form-input",children:[e.jsx("label",{children:"Subtitulo:"}),e.jsx("input",{required:!0,value:s.subtitulo??"",onChange:E,type:"text",name:"subtitulo",placeholder:"Subtitulo..."})]}),e.jsxs("div",{className:"form-input",children:[e.jsx("label",{children:"Sección del Producto:"}),e.jsxs("select",{required:!0,value:s.seccion,onChange:E,name:"seccion",children:[e.jsx("option",{value:"Trabajo",children:"Trabajo"}),e.jsx("option",{value:"Decoración",children:"Decoración"}),e.jsx("option",{value:"Negocio",children:"Negocio"})]})]}),e.jsxs("div",{className:"card",children:[e.jsx("h5",{className:"font-medium text-gray-700 dark:text-gray-400 mb-3",children:"Especificaciones"}),e.jsxs("div",{className:"flex items-center gap-2 form-input",children:[e.jsx("input",{type:"text",value:q,onChange:t=>r(t.target.value),placeholder:"Nueva especificación...",className:"flex-1",onKeyPress:t=>t.key==="Enter"&&(t.preventDefault(),H())}),e.jsxs("button",{type:"button",onClick:H,className:"inline-flex items-center gap-1 bg-teal-50 hover:bg-teal-100 text-teal-700 px-3 py-2 rounded-lg text-sm font-medium transition-colors",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Añadir Especificación"]})]}),e.jsxs("div",{className:"space-y-2",children:[s.especificaciones.map((t,a)=>e.jsxs("div",{className:"flex items-center gap-2 form-input",children:[e.jsx("input",{type:"text",value:t,onChange:i=>V(a,i.target.value)}),e.jsx("button",{type:"button",onClick:()=>K(a),className:"text-red-600 hover:text-red-800 p-1",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},a)),s.especificaciones.length===0&&e.jsx("p",{className:"text-sm text-gray-500 italic",children:"No hay especificaciones agregadas"})]})]}),e.jsxs("div",{className:"card",children:[e.jsx("h5",{className:"font-medium text-gray-700 dark:text-gray-400 mb-3",children:"Dimensiones"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[e.jsxs("div",{className:"form-input",children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Alto:"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{required:!0,title:"alto",value:s.dimensiones.alto,onChange:P,name:"alto",type:"number",placeholder:"0",className:"w-full pl-4 pr-12 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent outline-none transition"}),e.jsx("span",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 text-sm",children:"cm"})]})]}),e.jsxs("div",{className:"form-input",children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Ancho:"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{title:"ancho",required:!0,value:s.dimensiones.ancho,onChange:P,name:"ancho",type:"number",placeholder:"0",className:"w-full pl-4 pr-12 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent outline-none transition"}),e.jsx("span",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 text-sm",children:"cm"})]})]}),e.jsxs("div",{className:"form-input",children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Largo:"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{required:!0,title:"largo",value:s.dimensiones.largo,onChange:P,name:"largo",type:"number",placeholder:"0",className:"w-full pl-4 pr-12 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent outline-none transition"}),e.jsx("span",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 text-sm",children:"cm"})]})]})]})]})]}),e.jsxs("button",{onClick:F,className:"mt-6 mb-4 w-full bg-teal-600 hover:bg-teal-700 text-white py-3 px-6 rounded-lg font-medium shadow-md hover:shadow-lg transition-all duration-300 flex items-center justify-center gap-2",type:"button",children:["Siguiente",e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]}),e.jsxs("div",{className:`absolute w-full transition-all duration-500 ${p&&h===2?"-translate-x-full opacity-0 pointer-events-none":""} ${!p&&h===2?"translate-x-0 opacity-100 pointer-events-auto":"opacity-0 pointer-events-none"}`,children:[e.jsxs("div",{className:"card",children:[e.jsx("h5",{className:"font-medium text-gray-700 dark:text-gray-400 mb-4",children:"Galería de Imágenes"}),e.jsxs("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-md text-sm text-red-800",children:[e.jsx("p",{className:"font-medium",children:"⚠️ Importante:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 mt-1",children:[e.jsxs("li",{children:["Puedes subir hasta ",e.jsx("strong",{children:"5 imágenes"})," por producto."]}),e.jsx("li",{children:"Las imágenes que ves abajo son solo de referencia."}),e.jsxs("li",{children:["Al actualizar el producto, ",e.jsx("strong",{children:"se reemplazarán todas las imágenes"})," por las que subas aquí."]}),e.jsxs("li",{children:["Si quieres mantener alguna de las actuales, ",e.jsx("strong",{children:"debes volver a subirla"}),"."]}),e.jsx("li",{children:"Si es que no quieres cambiar nada conforme a las imágenes, ignorar esta página. "})]})]}),e.jsx("div",{className:"space-y-4",children:s.imagenes.map((t,a)=>e.jsxs("div",{className:"form-input",children:[e.jsxs("label",{children:["Imagen ",a+1,":"]}),e.jsx("div",{className:"border border-dashed border-gray-300 rounded-lg p-4 bg-white dark:bg-gray-900/70 dark:border-gray-700",children:t.url_imagen?e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("img",{src:typeof t.url_imagen=="string"?t.url_imagen.startsWith("http")?t.url_imagen:`https://apitami.tamimaquinarias.com${t.url_imagen}`:URL.createObjectURL(t.url_imagen),alt:t.texto_alt_SEO||`Imagen ${a+1}`,className:"w-16 h-16 object-cover rounded border-2 border-gray-200"}),e.jsxs("label",{className:"text-sm text-blue-600 underline cursor-pointer",children:["Reemplazar",e.jsx("input",{type:"file",accept:"image/*",onChange:i=>B(i,a),className:"hidden"})]}),e.jsx("p",{children:"* Obligatorio"})]}):e.jsx("input",{type:"file",accept:"image/*",onChange:i=>B(i,a),className:"w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-teal-50 file:text-teal-700 hover:file:bg-teal-100"})}),e.jsxs("label",{children:["Texto SEO Imagen ",a+1,":"]}),e.jsx("div",{className:"border border-dashed border-gray-300 rounded-lg p-4 bg-white dark:bg-gray-900/70",children:e.jsx("input",{type:"text",onChange:i=>W(i,a),value:t.texto_alt_SEO?t.texto_alt_SEO:"",className:"w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-teal-50 file:text-teal-700 hover:file:bg-teal-100 outline-none"})})]},a))})]}),e.jsxs("div",{className:"card mt-6",children:[e.jsx("h5",{className:"font-medium text-gray-700 dark:text-gray-400 mb-4",children:"Imagen para Pop-up"}),e.jsx("div",{className:"mb-3 p-3 bg-blue-50 border border-blue-200 rounded-md text-sm text-blue-800",children:e.jsx("p",{className:"font-medium",children:"ℹ️ Esta imagen se usará únicamente en el pop-up del producto."})}),e.jsxs("div",{className:"form-input",children:[e.jsx("label",{children:"Imagen Pop-up:"}),e.jsx("div",{className:"border border-dashed border-gray-300 rounded-lg p-4 bg-white dark:bg-gray-900/70 dark:border-gray-700",children:s.imagen_popup?e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("img",{src:typeof s.imagen_popup=="string"?s.imagen_popup:URL.createObjectURL(s.imagen_popup),alt:s.texto_alt_popup||"Imagen popup",className:"w-16 h-16 object-cover rounded border-2 border-gray-200"}),e.jsxs("label",{className:"text-sm text-blue-600 underline cursor-pointer",children:["Reemplazar",e.jsx("input",{type:"file",accept:"image/*",name:"imagen_popup",onChange:t=>{t.target.files?.[0]&&l(a=>({...a,imagen_popup:t.target.files[0]}))},className:"hidden"})]})]}):e.jsx("input",{type:"file",accept:"image/*",name:"imagen_popup",onChange:t=>{t.target.files?.[0]&&l(a=>({...a,imagen_popup:t.target.files[0]}))},className:"w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-teal-50 file:text-teal-700 hover:file:bg-teal-100"})})]}),e.jsxs("div",{className:"form-input",children:[e.jsx("label",{children:"Texto ALT Imagen Pop-up (opcional):"}),e.jsx("input",{type:"text",name:"texto_alt_popup",value:s.texto_alt_popup||"",onChange:t=>l(a=>({...a,texto_alt_popup:t.target.value})),placeholder:"Texto alternativo para SEO...",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent outline-none transition"})]})]}),e.jsxs("div",{className:"card mt-6",children:[e.jsx("h5",{className:"font-medium text-gray-700 dark:text-gray-400 mb-4",children:"Imagen para Correo Electrónico"}),e.jsx("div",{className:"mb-3 p-3 bg-blue-50 border border-blue-200 rounded-md text-sm text-blue-800",children:e.jsx("p",{className:"font-medium",children:"ℹ️ Esta imagen se usará únicamente para el envío de correos electrónicos del producto."})}),e.jsxs("div",{className:"form-input",children:[e.jsx("label",{children:"Imagen Email:"}),e.jsx("div",{className:"border border-dashed border-gray-300 rounded-lg p-4 bg-white dark:bg-gray-900/70 dark:border-gray-700",children:s.imagen_email?e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("img",{src:typeof s.imagen_email=="string"?s.imagen_email:URL.createObjectURL(s.imagen_email),alt:s.texto_alt_email||"Imagen email",className:"w-16 h-16 object-cover rounded border-2 border-gray-200"}),e.jsxs("label",{className:"text-sm text-blue-600 underline cursor-pointer",children:["Reemplazar",e.jsx("input",{type:"file",accept:"image/*",name:"imagen_email",onChange:t=>{t.target.files?.[0]&&l(a=>({...a,imagen_email:t.target.files[0]}))},className:"hidden"})]})]}):e.jsx("input",{type:"file",accept:"image/*",name:"imagen_email",onChange:t=>{t.target.files?.[0]&&l(a=>({...a,imagen_email:t.target.files[0]}))},className:"w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-teal-50 file:text-teal-700 hover:file:bg-teal-100"})})]}),e.jsxs("div",{className:"form-input",children:[e.jsx("label",{children:"Texto ALT Imagen Email (opcional):"}),e.jsx("input",{type:"text",name:"texto_alt_email",value:s.texto_alt_email||"",onChange:t=>l(a=>({...a,texto_alt_email:t.target.value})),placeholder:"Texto alternativo para SEO...",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent outline-none transition"})]}),e.jsxs("div",{className:"form-input",children:[e.jsx("label",{children:"URL del Video (opcional):"}),e.jsx("input",{type:"url",name:"video_url",value:s.video_url||"",onChange:t=>l(a=>({...a,video_url:t.target.value})),placeholder:"https://www.youtube.com/watch?v=...",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent outline-none transition"})]})]}),e.jsxs("div",{className:"card mt-6",children:[e.jsx("h5",{className:"font-medium text-gray-700 dark:text-gray-400 mb-4",children:"Imagen para Whatsapp"}),e.jsx("div",{className:"mb-3 p-3 bg-blue-50 border border-blue-200 rounded-md text-sm text-blue-800",children:e.jsx("p",{className:"font-medium",children:"ℹ️ Esta imagen se usará únicamente en el Whatsapp del producto."})}),e.jsxs("div",{className:"form-input",children:[e.jsx("label",{children:"Imagen Whatsaap:"}),e.jsx("div",{className:"border border-dashed border-gray-300 rounded-lg p-4 bg-white dark:bg-gray-900/70 dark:border-gray-700",children:e.jsx("input",{type:"file",accept:"image/*",name:"imagen_Whatsapp",onChange:t=>{t.target.files?.[0]&&l(a=>({...a,imagen_Whatsapp:t.target.files[0]}))},className:"w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-teal-50 file:text-teal-700 hover:file:bg-teal-100"})})]}),e.jsxs("div",{className:"form-input",children:[e.jsx("label",{children:"Texto ALT Imagen Whatsapp (opcional):"}),e.jsx("input",{type:"text",name:"texto_alt_popup",value:s.texto_alt_popup||"",onChange:t=>l(a=>({...a,texto_alt_popup:t.target.value})),placeholder:"Texto alternativo para SEO...",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent outline-none transition"})]})]}),e.jsxs("div",{className:"flex flex-col-reverse sm:flex-row gap-3 mt-6",children:[e.jsxs("button",{onClick:R,className:"w-full sm:w-1/2 bg-gray-200 hover:bg-gray-300 text-gray-800 py-3 px-6 rounded-lg font-medium transition-all duration-300 flex items-center justify-center gap-2",type:"button",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Volver"]}),e.jsxs("button",{type:"button",onClick:F,className:"w-full sm:w-1/2 bg-teal-600 hover:bg-teal-700 text-white py-3 px-6 rounded-lg font-medium shadow-md hover:shadow-lg transition-all duration-300 flex items-center justify-center gap-2",children:["Siguiente",e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]})]}),e.jsxs("div",{className:`absolute w-full transition-all duration-500 ${p&&h===3?"-translate-x-full opacity-0 pointer-events-none":""} ${!p&&h===3?"translate-x-0 opacity-100 pointer-events-auto":"opacity-0 pointer-events-none"}`,children:[e.jsxs("div",{className:"form-input mb-6",children:[e.jsx("label",{children:"Productos Relacionados:"}),v.length>0?e.jsx("div",{className:"card grid grid-cols-2 sm:grid-cols-3 gap-4 overflow-y-auto",children:v.map(t=>e.jsx("div",{className:"flex flex-col items-center gap-2",children:e.jsxs("label",{className:"cursor-pointer group relative",children:[e.jsx("input",{type:"checkbox",className:"peer absolute opacity-0",value:t.id,checked:s.relacionados.includes(t.id),onChange:a=>S(a,t.id)}),e.jsxs("div",{className:"relative flex items-center justify-center",children:[t.imagenes?.[0]?.url_imagen?e.jsx("img",{src:`https://apitami.tamimaquinarias.com${t.imagenes[0].url_imagen}`,alt:t.nombre,className:`w-24 h-24 md:w-28 md:h-28 object-cover rounded-xl border-2 transition-all duration-300 ${s.relacionados.includes(t.id)?"border-teal-600":"border-gray-200 group-hover:border-teal-400"}`}):e.jsx("span",{className:"text-sm text-gray-400 italic",children:"Sin imagen"}),e.jsx("div",{className:"absolute inset-0 bg-teal-600/0 peer-checked:bg-teal-600/20 flex items-center justify-center rounded-xl transition-all duration-300",children:e.jsx("svg",{className:"w-8 h-8 text-white opacity-0 peer-checked:opacity-100 transition-all duration-300",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("polyline",{points:"20 6 9 17 4 12"})})})]}),e.jsx("p",{className:"text-xs text-center mt-1 text-gray-600",children:t.nombre})]})},t.id))}):e.jsx("div",{className:"flex items-center justify-center h-40 bg-gray-50 rounded-lg border border-gray-200",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"inline-block p-3 rounded-full bg-gray-100 mb-2",children:e.jsx("svg",{className:"w-6 h-6 text-gray-400 animate-pulse",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})}),e.jsx("p",{className:"text-sm text-gray-500",children:"Cargando productos..."})]})})]}),e.jsxs("div",{className:"flex flex-col-reverse sm:flex-row gap-3",children:[e.jsxs("button",{onClick:R,className:"w-full sm:w-1/2 bg-gray-200 hover:bg-gray-300 text-gray-800 py-3 px-6 rounded-lg font-medium transition-all duration-300 flex items-center justify-center gap-2",type:"button",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Volver"]}),e.jsx("button",{disabled:u,type:"submit",className:`w-full sm:w-1/2 bg-teal-600 hover:bg-teal-700 text-white py-3 px-6 rounded-lg font-medium shadow-md hover:shadow-lg transition-all duration-300 flex items-center justify-center gap-2 ${u?"opacity-75 cursor-not-allowed":""}`,children:u?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]}),e.jsx("span",{children:"Guardando..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Guardar Producto"}),e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})]})})]})]})]})]})]})]})};function pe(n){return Z({attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M512 1024c-69.1 0-136.2-13.5-199.3-40.2C251.7 958 197 921 150 874c-47-47-84-101.7-109.8-162.7C13.5 648.2 0 581.1 0 512c0-19.9 16.1-36 36-36s36 16.1 36 36c0 59.4 11.6 117 34.6 171.3 22.2 52.4 53.9 99.5 94.3 139.9 40.4 40.4 87.5 72.2 139.9 94.3C395 940.4 452.6 952 512 952c59.4 0 117-11.6 171.3-34.6 52.4-22.2 99.5-53.9 139.9-94.3 40.4-40.4 72.2-87.5 94.3-139.9C940.4 629 952 571.4 952 512c0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 0 0-94.3-139.9 437.71 437.71 0 0 0-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.2C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3s-13.5 136.2-40.2 199.3C958 772.3 921 827 874 874c-47 47-101.8 83.9-162.7 109.7-63.1 26.8-130.2 40.3-199.3 40.3z"},child:[]}]})(n)}const xe=({onProductAdded:n})=>{const[w,u]=d.useState(!1),[j,k]=d.useState(!1),[N,h]=d.useState(1),[_,p]=d.useState(!1),[I,v]=d.useState([]),[C,q]=d.useState(""),[r,s]=d.useState(U),l=o=>{s({...r,[o.target.name]:o.target.value})},E=o=>{const{name:t,value:a}=o.target;s(i=>({...i,dimensiones:{...i.dimensiones,[t]:a}}))},P=(o,t)=>{o.target.checked?s({...r,relacionados:[...r.relacionados,t]}):s({...r,relacionados:r.relacionados.filter(a=>a!==t)})},S=(o,t)=>{if(o.target.files&&o.target.files[0]){const a=[...r.imagenes];a[t]={...a[t],url_imagen:o.target.files[0]},s({...r,imagenes:a})}},c=(o,t)=>{if(o.target.value){const a=[...r.imagenes];a[t]={...a[t],texto_alt_SEO:o.target.value},s({...r,imagenes:a})}},g=d.useRef(null);function f(){k(!0)}function B(){h(1),k(!1),s(U)}function W(){p(!0),setTimeout(()=>{h(o=>o+1),p(!1),D()},500)}function $(){p(!0),setTimeout(()=>{h(o=>o-1),p(!1),D()},500)}function D(){g.current&&g.current.scrollTo({top:0,behavior:"smooth"})}const O=()=>{C.trim()&&(s(o=>({...o,especificaciones:[...o.especificaciones,C.trim()]})),q(""))},F=o=>{s(t=>({...t,especificaciones:t.especificaciones.filter((a,i)=>i!==o)}))},R=(o,t)=>{const a=[...r.especificaciones];a[o]=t,s(i=>({...i,especificaciones:a}))},z=()=>{s(o=>({...o,etiqueta:{...o.etiqueta,keywords:[...o.etiqueta.keywords,""]}}))},H=(o,t)=>{const a=[...r.etiqueta.keywords];a[o]=t.target.value,s(i=>({...i,etiqueta:{...i.etiqueta,keywords:a}}))},K=o=>{s(t=>({...t,etiqueta:{...t.etiqueta,keywords:t.etiqueta.keywords.filter((a,i)=>i!==o)}}))},V=async o=>{if(o.preventDefault(),u(!0),!r.nombre||!r.titulo||!r.subtitulo||!r.descripcion||!r.seccion||!r.especificaciones||!r.imagenes||r.imagenes.every(t=>!t.url_imagen)){b.fire({icon:"warning",title:"Campos obligatorios",text:"⚠️ Todos los campos son obligatorios."}),u(!1);return}if(!r.etiqueta.meta_titulo.trim()||r.etiqueta.meta_titulo.length<10||r.etiqueta.meta_titulo.length>70){b.fire({icon:"warning",title:"Meta título inválido",text:"⚠️ El meta título debe tener entre 10 y 70 caracteres."}),u(!1);return}if(!r.etiqueta.meta_descripcion.trim()||r.etiqueta.meta_descripcion.length<50||r.etiqueta.meta_descripcion.length>200){b.fire({icon:"warning",title:"Meta descripción inválida",text:"⚠️ La meta descripción debe tener entre 50 y 200 caracteres."}),u(!1);return}if(r.etiqueta.keywords.every(t=>!t)){b.fire({icon:"warning",title:"Keywords inválidos",text:"⚠️ Los keywords son obligatorios."}),u(!1);return}try{const t=localStorage.getItem("token"),a=new FormData;a.append("nombre",r.nombre),a.append("titulo",r.titulo),a.append("subtitulo",r.subtitulo),a.append("descripcion",r.descripcion),a.append("link",r.link),a.append("stock",r.stock.toString()),a.append("precio",r.precio.toString()),a.append("seccion",r.seccion),a.append("especificaciones",JSON.stringify(r.especificaciones)),a.append("keywords",JSON.stringify(r.etiqueta.keywords)),a.append("etiqueta[meta_titulo]",r.etiqueta.meta_titulo),a.append("etiqueta[meta_descripcion]",r.etiqueta.meta_descripcion),a.append("dimensiones[alto]",r.dimensiones.alto),a.append("dimensiones[largo]",r.dimensiones.largo),a.append("dimensiones[ancho]",r.dimensiones.ancho);const i=te(r.titulo||r.nombre);a.append("link",i);let m=0;r.imagenes.forEach(y=>{if(y.url_imagen){const T=y.texto_alt_SEO.trim()||"Texto SEO para imagen";a.append(`imagenes[${m}]`,y.url_imagen),a.append(`textos_alt[${m}]`,T),m++}}),r.relacionados.forEach((y,T)=>{a.append(`relacionados[${T}]`,y.toString())}),r.imagen_popup&&(a.append("imagen_popup",r.imagen_popup),a.append("texto_alt_popup",r.texto_alt_popup||"")),r.imagen_email&&(a.append("imagen_email",r.imagen_email),a.append("texto_alt_email",r.texto_alt_email||"")),r.imagen_whatsapp&&(a.append("imagen_Whatsapp",r.imagen_whatsapp),a.append("texto_alt_Whatsapp",r.texto_alt_whatsapp||"")),r.video_url&&a.append("video_url",r.video_url);const L=await fetch(G(M.endpoints.productos.create),{method:"POST",body:a,headers:{Authorization:`Bearer ${t}`,Accept:"application/json"}}),x=await L.json();console.log("Respuesta del servidor:",x),L.ok?(b.fire({icon:"success",title:"Producto añadido exitosamente",showConfirmButton:!1,timer:1500}),B(),u(!1),n?.()):(b.fire({icon:"error",title:"Error",text:x.message}),u(!1))}catch(t){console.error("Error al enviar los datos:",t),b.fire({icon:"error",title:"Error",text:`❌ Error: ${t}`}),u(!1)}};return d.useEffect(()=>{j&&(async()=>{try{const t=await Q();v(t)}catch(t){console.error("Error al obtener productos:",t)}})()},[j]),e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:f,className:"flex items-center gap-2 bg-teal-600 text-white hover:bg-teal-700 transition-all duration-300 px-5 py-3 rounded-lg text-sm font-bold shadow-lg hover:shadow-xl",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Agregar Producto"]}),j&&e.jsxs("div",{className:"dialog-overlay",children:[e.jsx("button",{className:"absolute top-4 right-4 md:top-6 md:right-6 text-white hover:text-red-400 transition-all duration-300 hover:cursor-pointer text-3xl md:text-4xl",onClick:()=>B(),"aria-label":"Cerrar",children:e.jsx(ee,{})}),e.jsxs("div",{ref:g,className:"dialog max-h-[90vh] min-h-[70vh] md:min-h-[80vh]",children:[e.jsx("div",{className:"dialog-header",children:e.jsx("h4",{className:"dialog-title",children:"Agregar Producto"})}),e.jsxs("form",{onSubmit:V,className:"relative",children:[e.jsxs("div",{className:`absolute w-full transition-all duration-500 ${_&&N===1?"-translate-x-full opacity-0 pointer-events-none":""} ${!_&&N===1?"translate-x-0 opacity-100 pointer-events-auto":"opacity-0 pointer-events-none"}`,children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"form-input",children:[e.jsx("label",{children:"Nombre:"}),e.jsx("input",{required:!0,value:r.nombre,onChange:l,type:"text",name:"nombre",placeholder:"Nombre del producto..."})]}),e.jsxs("div",{className:"form-input",children:[e.jsx("label",{children:"Descripción:"}),e.jsx("textarea",{required:!0,value:r.descripcion,onChange:l,name:"descripcion",placeholder:"Descripción del producto...",className:"min-h-[100px]"})]}),e.jsxs("div",{className:"form-input",children:[e.jsxs("label",{htmlFor:"meta_titulo",children:["Meta título ",e.jsx("span",{className:"text-gray-500",children:"(recomendado: 50-60 caracteres)"})]}),e.jsx("input",{type:"text",id:"meta_titulo",name:"meta_titulo",value:r.etiqueta.meta_titulo,onChange:o=>s(t=>({...t,etiqueta:{...t.etiqueta,meta_titulo:o.target.value}})),maxLength:70}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[r.etiqueta.meta_titulo.length," / 70 caracteres"]})]}),e.jsxs("div",{className:"form-input",children:[e.jsxs("label",{htmlFor:"meta_descripcion",children:["Meta descripción ",e.jsx("span",{className:"text-gray-500",children:"(recomendado: 40-160 caracteres)"})]}),e.jsx("textarea",{id:"meta_descripcion",name:"meta_descripcion",value:r.etiqueta.meta_descripcion,onChange:o=>s(t=>({...t,etiqueta:{...t.etiqueta,meta_descripcion:o.target.value}})),maxLength:200,rows:3}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[r.etiqueta.meta_descripcion.length," / 200 caracteres"]})]}),e.jsxs("div",{className:"card",children:[e.jsx("h4",{className:"font-medium text-gray-700 dark:text-gray-400 mb-3",children:"Keywords:"}),r.etiqueta.keywords.map((o,t)=>e.jsxs("div",{className:"form-input flex justify-between gap-2",children:[e.jsx("input",{type:"text",id:"keywords",value:o,onChange:a=>H(t,a)}),e.jsx("button",{type:"button",disabled:t===0,onClick:()=>K(t),className:"text-red-600 hover:cursor-pointer disabled:opacity-20 disabled:cursor-not-allowed",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})),e.jsxs("button",{type:"button",onClick:z,className:"inline-flex items-center gap-1 bg-teal-50 hover:bg-teal-100 text-teal-700 px-3 py-2 rounded-lg text-sm font-medium transition-colors",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Añadir keyword"]})]}),e.jsxs("div",{className:"form-input",children:[e.jsx("label",{children:"Título:"}),e.jsx("input",{required:!0,value:r.titulo,onChange:l,type:"text",name:"titulo",placeholder:"Título..."})]}),e.jsxs("div",{className:"form-input",children:[e.jsx("label",{children:"Subtitulo:"}),e.jsx("input",{required:!0,value:r.subtitulo,onChange:l,type:"text",name:"subtitulo",placeholder:"Subtitulo..."})]}),e.jsxs("div",{className:"form-input",children:[e.jsx("label",{children:"Sección del Producto:"}),e.jsxs("select",{required:!0,value:r.seccion,onChange:l,name:"seccion",children:[e.jsx("option",{value:"Negocio",children:"Negocio"}),e.jsx("option",{value:"Decoración",children:"Decoración"}),e.jsx("option",{value:"Maquinaria",children:"Maquinaria"})]})]}),e.jsxs("div",{className:"card",children:[e.jsx("h5",{className:"font-medium text-gray-700 dark:text-gray-400 mb-3",children:"Especificaciones"}),e.jsxs("div",{className:"flex items-center gap-2 form-input",children:[e.jsx("input",{type:"text",value:C,onChange:o=>q(o.target.value),placeholder:"Nueva especificación...",className:"flex-1 ",onKeyPress:o=>o.key==="Enter"&&(o.preventDefault(),O())}),e.jsxs("button",{type:"button",onClick:O,className:"inline-flex items-center gap-1 bg-teal-50 hover:bg-teal-100 text-teal-700 px-3 py-2 rounded-lg text-sm font-medium transition-colors",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Añadir Especificación"]})]}),e.jsxs("div",{className:"space-y-2",children:[r.especificaciones.map((o,t)=>e.jsxs("div",{className:"flex items-center gap-2 form-input",children:[e.jsx("input",{type:"text",value:o,onChange:a=>R(t,a.target.value)}),e.jsx("button",{type:"button",onClick:()=>F(t),className:"text-red-600 hover:text-red-800 p-1",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},t)),r.especificaciones.length===0&&e.jsx("p",{className:"text-sm text-gray-500 italic",children:"No hay especificaciones agregadas"})]})]}),e.jsxs("div",{className:"card",children:[e.jsx("h5",{className:"font-medium text-gray-700 dark:text-gray-400 mb-3",children:"Dimensiones"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[e.jsxs("div",{className:"form-input",children:[e.jsx("label",{children:"Alto:"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{required:!0,value:r.dimensiones.alto,onChange:E,name:"alto",type:"number",placeholder:"0",className:"w-full pl-4 pr-12 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent outline-none transition"}),e.jsx("span",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 text-sm",children:"cm"})]})]}),e.jsxs("div",{className:"form-input",children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Ancho:"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{required:!0,value:r.dimensiones.ancho,onChange:E,name:"ancho",type:"number",placeholder:"0",className:"w-full pl-4 pr-12 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent outline-none transition"}),e.jsx("span",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 text-sm",children:"cm"})]})]}),e.jsxs("div",{className:"form-input",children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Largo:"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{required:!0,value:r.dimensiones.largo,onChange:E,name:"largo",type:"number",placeholder:"0",className:"w-full pl-4 pr-12 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent outline-none transition"}),e.jsx("span",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 text-sm",children:"cm"})]})]})]})]})]}),e.jsxs("button",{onClick:W,className:"mt-6 mb-4 w-full bg-teal-600 hover:bg-teal-700 text-white py-3 px-6 rounded-lg font-medium shadow-md hover:shadow-lg transition-all duration-300 flex items-center justify-center gap-2",type:"button",children:["Siguiente",e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]}),e.jsxs("div",{className:`absolute w-full transition-all duration-500 ${_&&N===2?"-translate-x-full opacity-0 pointer-events-none":""} ${!_&&N===2?"translate-x-0 opacity-100 pointer-events-auto":"opacity-0 pointer-events-none"}`,children:[e.jsxs("div",{className:"card",children:[e.jsx("h5",{className:"font-medium text-gray-700 dark:text-gray-400 mb-4",children:"Galería de Imágenes"}),e.jsxs("div",{className:"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-md text-sm text-blue-800",children:[e.jsx("p",{className:"font-medium",children:"ℹ️ Instrucciones:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 mt-1",children:[e.jsxs("li",{children:["Puedes subir hasta ",e.jsx("strong",{children:"5 imágenes"})," por producto."]}),e.jsxs("li",{children:["Al menos ",e.jsx("strong",{children:"1 imagen es obligatoria"}),"."]}),e.jsxs("li",{children:["Cada imagen debe tener un ",e.jsx("strong",{children:"Texto SEO"})," descriptivo (importante para buscadores)."]}),e.jsxs("li",{children:["Las imágenes deben ser en formato ",e.jsx("code",{children:"JPG"})," o ",e.jsx("code",{children:"PNG"}),"."]}),e.jsx("li",{children:"Si es un producto de 4 imágenes no subir nada en los campos de la 5ta imagen"})]})]}),e.jsx("div",{className:"space-y-4",children:r.imagenes.map((o,t)=>e.jsxs("div",{className:"form-input",children:[e.jsxs("label",{children:["Imagen ",t+1,":"]}),e.jsx("div",{className:"border border-dashed border-gray-300 rounded-lg p-4 bg-white dark:bg-gray-900/70 dark:border-gray-700",children:e.jsx("input",{type:"file",accept:"image/*",onChange:a=>S(a,t),className:"w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-teal-50 file:text-teal-700 hover:file:bg-teal-100"})}),e.jsxs("label",{children:["Texto SEO Imagen ",t+1,":"]}),e.jsx("div",{className:"border border-dashed border-gray-300 rounded-lg p-4 bg-white dark:bg-gray-900/70 dark:border-gray-700",children:e.jsx("input",{type:"text",onChange:a=>c(a,t),className:"w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-teal-50 file:text-teal-700 hover:file:bg-teal-100 outline-none"})})]},t))})]}),e.jsxs("div",{className:"card mt-6",children:[e.jsx("h5",{className:"font-medium text-gray-700 dark:text-gray-400 mb-4",children:"Imagen para Pop-up"}),e.jsx("div",{className:"mb-3 p-3 bg-blue-50 border border-blue-200 rounded-md text-sm text-blue-800",children:e.jsx("p",{className:"font-medium",children:"ℹ️ Esta imagen se usará únicamente en el pop-up del producto."})}),e.jsxs("div",{className:"form-input",children:[e.jsx("label",{children:"Imagen Pop-up:"}),e.jsx("div",{className:"border border-dashed border-gray-300 rounded-lg p-4 bg-white dark:bg-gray-900/70 dark:border-gray-700",children:e.jsx("input",{type:"file",accept:"image/*",name:"imagen_popup",onChange:o=>{o.target.files?.[0]&&s(t=>({...t,imagen_popup:o.target.files[0]}))},className:"w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-teal-50 file:text-teal-700 hover:file:bg-teal-100"})})]}),e.jsxs("div",{className:"form-input",children:[e.jsx("label",{children:"Texto ALT Imagen Pop-up (opcional):"}),e.jsx("input",{type:"text",name:"texto_alt_popup",value:r.texto_alt_popup||"",onChange:o=>s(t=>({...t,texto_alt_popup:o.target.value})),placeholder:"Texto alternativo para SEO...",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent outline-none transition"})]})]}),e.jsxs("div",{className:"card mt-6",children:[e.jsx("h5",{className:"font-medium text-gray-700 dark:text-gray-400 mb-4",children:"Imagen para Correo Electrónico"}),e.jsx("div",{className:"mb-3 p-3 bg-blue-50 border border-blue-200 rounded-md text-sm text-blue-800",children:e.jsx("p",{className:"font-medium",children:"ℹ️ Esta imagen se usará únicamente para el envío de correos electrónicos del producto."})}),e.jsxs("div",{className:"form-input",children:[e.jsx("label",{children:"Imagen Email:"}),e.jsx("div",{className:"border border-dashed border-gray-300 rounded-lg p-4 bg-white dark:bg-gray-900/70 dark:border-gray-700",children:e.jsx("input",{type:"file",accept:"image/*",name:"imagen_email",onChange:o=>{o.target.files?.[0]&&s(t=>({...t,imagen_email:o.target.files[0]}))},className:"w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-teal-50 file:text-teal-700 hover:file:bg-teal-100"})})]}),e.jsxs("div",{className:"form-input",children:[e.jsx("label",{children:"Texto ALT Imagen Email (opcional):"}),e.jsx("input",{type:"text",name:"texto_alt_email",value:r.texto_alt_email||"",onChange:o=>s(t=>({...t,texto_alt_email:o.target.value})),placeholder:"Texto alternativo para SEO...",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent outline-none transition"})]}),e.jsxs("div",{className:"form-input",children:[e.jsx("label",{children:"URL del Video (opcional):"}),e.jsx("input",{type:"url",name:"video_url",value:r.video_url||"",onChange:o=>s(t=>({...t,video_url:o.target.value})),placeholder:"https://www.youtube.com/watch?v=...",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent outline-none transition"})]})]}),e.jsxs("div",{className:"card mt-6",children:[e.jsx("h5",{className:"font-medium text-gray-700 dark:text-gray-400 mb-4",children:"Imagen para Whatsapp"}),e.jsx("div",{className:"mb-3 p-3 bg-blue-50 border border-blue-200 rounded-md text-sm text-blue-800",children:e.jsx("p",{className:"font-medium",children:"ℹ️ Esta imagen se usará únicamente en el Whatsapp del producto."})}),e.jsxs("div",{className:"form-input",children:[e.jsx("label",{children:"Imagen Whatsapp:"}),e.jsx("div",{className:"border border-dashed border-gray-300 rounded-lg p-4 bg-white dark:bg-gray-900/70 dark:border-gray-700",children:e.jsx("input",{type:"file",accept:"image/*",name:"imagen_Whatsapp",onChange:o=>{o.target.files?.[0]&&s(t=>({...t,imagen_Whatsapp:o.target.files[0]}))},className:"w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-teal-50 file:text-teal-700 hover:file:bg-teal-100"})})]}),e.jsxs("div",{className:"form-input",children:[e.jsx("label",{children:"Texto ALT Imagen Whatsapp (opcional):"}),e.jsx("input",{type:"text",name:"texto_alt_popup",value:r.texto_alt_popup||"",onChange:o=>s(t=>({...t,texto_alt_popup:o.target.value})),placeholder:"Texto alternativo para SEO...",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent outline-none transition"})]})]}),e.jsxs("div",{className:"flex flex-col-reverse sm:flex-row gap-3 mt-6",children:[e.jsxs("button",{onClick:$,className:"w-full sm:w-1/2 bg-gray-200 hover:bg-gray-300 text-gray-800 py-3 px-6 rounded-lg font-medium transition-all duration-300 flex items-center justify-center gap-2",type:"button",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Volver"]}),e.jsxs("button",{type:"button",onClick:W,className:"w-full sm:w-1/2 bg-teal-600 hover:bg-teal-700 text-white py-3 px-6 rounded-lg font-medium shadow-md hover:shadow-lg transition-all duration-300 flex items-center justify-center gap-2",children:["Siguiente",e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]})]}),e.jsxs("div",{className:`absolute w-full transition-all duration-500 ${_&&N===3?"-translate-x-full opacity-0 pointer-events-none":""} ${!_&&N===3?"translate-x-0 opacity-100 pointer-events-auto":"opacity-0 pointer-events-none"}`,children:[e.jsxs("div",{className:"form-input mb-6",children:[e.jsx("label",{children:"Productos Relacionados:"}),I.length>0?e.jsx("div",{className:"card grid grid-cols-2 sm:grid-cols-3 gap-4 overflow-y-auto",children:I.map(o=>e.jsx("div",{className:"flex flex-col items-center gap-2",children:e.jsxs("label",{className:"cursor-pointer group relative",children:[e.jsx("input",{type:"checkbox",className:"peer absolute opacity-0",value:o.id,onChange:t=>P(t,o.id)}),e.jsxs("div",{className:"relative flex items-center justify-center",children:[o.imagenes?.[0]?.url_imagen?e.jsx("img",{src:`https://apitami.tamimaquinarias.com${o.imagenes[0].url_imagen}`,alt:o.nombre,className:`w-24 h-24 md:w-28 md:h-28 object-cover rounded-xl border-2 transition-all duration-300 ${r.relacionados.includes(o.id)?"border-teal-600":"border-gray-200 group-hover:border-teal-400"}`}):e.jsx("span",{className:"text-sm text-gray-400 italic",children:"Sin imagen"}),e.jsx("div",{className:"absolute inset-0 bg-teal-600/0 peer-checked:bg-teal-600/20 flex items-center justify-center rounded-xl transition-all duration-300",children:e.jsx("svg",{className:"w-8 h-8 text-white opacity-0 peer-checked:opacity-100 transition-all duration-300",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("polyline",{points:"20 6 9 17 4 12"})})})]}),e.jsx("p",{className:"text-xs text-center mt-1 text-gray-600 dark:text-gray-500",children:o.nombre})]})},o.id))}):e.jsx("div",{className:"flex items-center justify-center h-40 bg-gray-50 rounded-lg border border-gray-200",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"inline-block p-3 rounded-full bg-gray-100 mb-2",children:e.jsx("svg",{className:"w-6 h-6 text-gray-400 animate-pulse",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})}),e.jsx("p",{className:"text-sm text-gray-500",children:"Cargando productos..."})]})})]}),e.jsxs("div",{className:"flex flex-col-reverse sm:flex-row gap-3",children:[e.jsxs("button",{onClick:$,className:"w-full sm:w-1/2 bg-gray-200 hover:bg-gray-300 text-gray-800 py-3 px-6 rounded-lg font-medium transition-all duration-300 flex items-center justify-center gap-2",type:"button",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Volver"]}),e.jsx("button",{disabled:w,type:"submit",className:`w-full sm:w-1/2 bg-teal-600 hover:bg-teal-700 text-white py-3 px-6 rounded-lg font-medium shadow-md hover:shadow-lg transition-all duration-300 flex items-center justify-center gap-2 ${w?"opacity-75 cursor-not-allowed":""}`,children:w?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]}),e.jsx("span",{children:"Guardando..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Guardar Producto"}),e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})]})})]})]})]})]})]})]})},ge=M.apiUrl,Ne=()=>{const[n,w]=d.useState([]),[u,j]=d.useState([]),[k,N]=d.useState(null),[h,_]=d.useState(!0),[p,I]=d.useState(""),[v,C]=d.useState(1),q=5,r=async()=>{_(!0);try{const c=await Q();c&&(w(c),j(c))}catch(c){console.error("Error al obtener productos:",c),b.fire({icon:"error",title:"Error",text:"Hubo un error al cargar los productos",confirmButtonColor:"#14b8a6"})}finally{_(!1)}},s=c=>{b.fire({title:"¿Estás seguro?",text:"¡No podrás revertir esta acción!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#14b8a6",cancelButtonColor:"#ef4444",confirmButtonText:"Sí, eliminar",cancelButtonText:"Cancelar"}).then(g=>{g.isConfirmed&&(N(c),me(c).then(f=>{f&&(b.fire({icon:"success",title:"Eliminado",text:"El producto ha sido eliminado correctamente",confirmButtonColor:"#14b8a6"}),N(null),r())}).catch(f=>{console.error("Error al eliminar producto:",f),b.fire({icon:"error",title:"Error",text:"Hubo un error al eliminar el producto",confirmButtonColor:"#14b8a6"}),N(null)}))})};d.useEffect(()=>{r()},[]),d.useEffect(()=>{if(p==="")j(n),C(1);else{const c=n.filter(g=>g.nombre.toLowerCase().includes(p.toLowerCase())||g.seccion.toLowerCase().includes(p.toLowerCase())||g.id.toString().includes(p));j(c),C(1)}},[p,n]);const l=v*q,E=l-q,P=u.slice(E,l),S=Math.ceil(u.length/q);return h?e.jsx(oe,{message:"cargando productos"}):e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-teal-500 to-emerald-600 px-8 py-6 rounded-t-2xl",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center gap-4",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-extrabold flex items-center gap-2 text-white",children:[e.jsx(Y,{}),e.jsx("span",{children:"Gestión de Productos"})]}),e.jsx("p",{className:"text-teal-50 mt-2 text-lg",children:"Administra el catálogo de productos de tu empresa"})]}),e.jsx("div",{className:"flex-shrink-0",children:e.jsx(xe,{onProductAdded:r})})]})}),e.jsxs("div",{className:"p-8 space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-between items-center",children:[e.jsx(ie,{placeholder:"Buscar productos...",value:p,onChange:I}),e.jsxs("button",{onClick:r,disabled:h,className:"flex items-center gap-2 bg-white text-teal-600 border-2 border-teal-500 hover:bg-teal-50 transition-all duration-300 px-5 py-3 rounded-full text-sm font-bold w-full sm:w-auto justify-center shadow-sm",children:[e.jsx(se,{className:`h-4 w-4 ${h?"animate-spin":""}`}),h?"Cargando...":"Actualizar Catálogo"]})]}),e.jsx("div",{className:"flex items-center justify-between bg-teal-50 p-4 rounded-xl border border-teal-100 shadow-sm",children:e.jsxs("div",{className:"text-sm font-medium text-teal-700 flex items-center gap-2",children:[e.jsx("span",{className:"bg-teal-500 text-white text-sm font-bold py-1 px-3 rounded-full",children:u.length}),u.length===1?"producto":"productos"," encontrados"]})})]}),e.jsxs(ne,{children:[e.jsx(le,{children:e.jsx(J,{children:["ID","NOMBRE","SECCIÓN","IMAGEN","ACCIÓN"].map((c,g)=>e.jsx(ce,{className:"font-bold tracking-wide uppercase text-xs",children:c},g))})}),e.jsx(de,{children:P.length>0?P.map(c=>e.jsxs(J,{children:[e.jsxs(A,{className:"whitespace-nowrap text-teal-700",children:["#",c.id]}),e.jsx(A,{className:"px-6 py-4 font-medium",children:c.nombre}),e.jsx(A,{className:"px-6 py-4",children:e.jsx("span",{className:"bg-teal-100 text-teal-800 py-1 px-3 rounded-full text-xs capitalize font-medium",children:c.seccion?c.seccion.toLowerCase():"sin sección"})}),e.jsx(A,{className:"px-6 py-4",children:e.jsx("div",{className:"flex items-center",children:c.imagenes?.[0]?.url_imagen?e.jsx("img",{src:`${ge}${c.imagenes[0].url_imagen}`,alt:c.nombre,className:"w-14 h-14 object-cover rounded-lg shadow-md border border-gray-200"}):e.jsx("span",{className:"text-sm text-gray-400 italic",children:"Sin imagen"})})}),e.jsx(A,{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex gap-3 items-center",children:[e.jsx(ue,{product:c,onProductUpdated:r}),e.jsx("button",{className:"p-2 rounded-full hover:bg-red-100 text-red-500 transition-colors duration-200 border border-transparent hover:border-red-200",title:"Eliminar",onClick:()=>s(c.id),disabled:k===c.id,children:k===c.id?e.jsx(pe,{className:"animate-spin",size:18}):e.jsx(re,{size:18})})]})})]},c.id)):e.jsx(J,{children:e.jsx(A,{colSpan:5,className:"text-center py-16 text-gray-500",children:e.jsxs("div",{className:"flex flex-col items-center justify-center gap-2",children:[e.jsx("div",{className:"bg-teal-50 p-6 rounded-full",children:e.jsx(Y,{className:"h-10 w-10 text-teal-300"})}),e.jsx("p",{className:"text-xl font-medium text-gray-600 mt-4",children:p?"No se encontraron productos que coincidan con tu búsqueda":"No hay productos registrados"}),e.jsx("p",{className:"text-gray-400 max-w-md mx-auto",children:p?"Intenta con otros términos de búsqueda":"Comienza agregando productos a tu catálogo con el botón 'Agregar Producto'"})]})})})})]}),u.length>0&&e.jsxs("div",{className:"flex justify-center gap-2 mt-8 px-4 pb-6",children:[e.jsx("button",{onClick:()=>C(c=>Math.max(c-1,1)),disabled:v===1,className:`${v===1?"":"cursor-pointer"} px-3 py-1 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-md hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 text-sm text-gray-700 dark:text-gray-200`,children:"Anterior"}),Array.from({length:Math.min(S,5)},(c,g)=>{let f;return S<=5||v<=3?f=g+1:v>=S-2?f=S-4+g:f=v-2+g,e.jsx("button",{onClick:()=>C(f),className:`px-3 py-1 border rounded-md text-sm cursor-pointer ${v===f?"bg-teal-500 text-white border-teal-500":"bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-200 border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:f},g)}),e.jsx("button",{onClick:()=>C(c=>Math.min(c+1,S)),disabled:v===S,className:`${v===S?"":"cursor-pointer"} px-3 py-1 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-md hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 text-sm text-gray-700 dark:text-gray-200`,children:"Siguiente"})]})]})})};export{Ne as default};

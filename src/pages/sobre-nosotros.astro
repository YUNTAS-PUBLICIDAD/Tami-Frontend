---
import Layout from "../layouts/Layout.astro";
import aboutHero from "@images/about/nosotros_hero.png";
import valoresArray from "@data/valores.data";
import Card from "../components/about/Card.astro";
import bg_card4 from "@images/about/nosotrostami.webp";
import bg_card4_mobile from "@images/about/nosotrosTamiResponsive.svg";

import AboutHeroBackground from "../components/about/AboutHeroBackground.jsx";
---

<!-- Cargar CSS de Swiper temprano -->
<link
  rel="stylesheet"
  href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css"
/>

<Layout
  title="驴Qui茅nes Somos? | Tami Maquinarias para Emprendedores"
  description="Somos Tami, empresa peruana que apoya a emprendedores con maquinaria y suministros para negocios. Comprometidos con la calidad."
  canonicalUrl="https://tamimaquinarias.com/about/"
>

  <section
    class="relative h-[30vh] sm:h-screen min-h-[32vh] pt-16 lg:pt-20 text-white overflow-hidden"
  >
    <AboutHeroBackground client:load imageSrc={aboutHero.src} />

    <div
      class="absolute inset-0 z-20 flex flex-col items-center justify-center text-center px-6 pt-10 pb-4 sm:pt-0
      bg-gradient-to-b from-[#046A63]/40 to-[#023B37]/60"
    >
      <h2
        class="text-xl sm:text-5xl lg:text-7xl font-extrabold mb-2 leading-tight"
      >
        SOBRE NOSOTROS
      </h2>

      <p
        class="text-[12.5px] sm:text-lg md:text-xl max-w-[260px] sm:max-w-4xl
        leading-snug sm:leading-relaxed"
      >
        Buscamos ayudar en tu negocio, mediante la comercializaci贸n de productos
        para emprendimiento, trabajo y decoraci贸n, cumpliendo con los est谩ndares
        de calidad.
      </p>
    </div>
  </section>

  <style>
    @keyframes fadeInUp {
      0% {
        opacity: 0;
        transform: translateY(40px);
      }
      100% {
        opacity: 1;
        transform: translateY(0);
      }
    }
    .animate-fadeInUp {
      animation: fadeInUp 1.2s cubic-bezier(0.23, 1, 0.32, 1);
    }
  </style>

  {/*  Secci贸n Identidad y CTA */}
  <section class="w-full px-0">
    <div
      class="relative overflow-hidden flex items-end md:items-center justify-center md:justify-start md:h-[1000px]"
    >
      <!-- Fondo mobile -->
      <img
        src={bg_card4_mobile.src}
        alt="Fondo Tami"
        class="block md:hidden w-full h-auto object-contain object-center"
      />
      <!-- Fondo desktop -->
      <div
        class="hidden md:block absolute inset-0 bg-no-repeat bg-cover bg-center"
        style={`background-image: url('${bg_card4.src}');`}
      >
      </div>

      <!-- Oscurecido -->
      <div class="absolute inset-0 bg-black/45 z-0"></div>

      <!-- Contenido -->
      <div
        class="absolute z-10 text-white text-center md:text-left w-full md:max-w-5xl mx-auto px-4 sm:px-6 md:px-8 md:ml-8 lg:ml-16 pb-5 md:pb-0 md:py-8 flex flex-col justify-end md:justify-center"
      >
        <h2
          class="text-2xl sm:text-3xl md:text-5xl lg:text-6xl font-bold mb-3 md:mb-8 leading-tight drop-shadow-md uppercase"
        >
          驴POR QU ELEGIR TAMI?
        </h2>

        <p
          class="text-sm sm:text-base md:text-lg font-light mb-5 md:mb-10 opacity-95 leading-relaxed text-center md:text-justify"
        >
          En <span class="font-bold">Tami</span> nos especializamos en soluciones
          de maquinaria y tecnolog铆a para empresas y emprendedores que buscan eficiencia,
          innovaci贸n y confianza. Nuestra misi贸n es acompa帽ar a nuestros clientes
          en el crecimiento de sus proyectos, brindando productos de calidad y un
          servicio personalizado.
        </p>

        <div class="flex justify-center md:justify-start mb-3 md:mb-0">
          <a
            href="/productos"
            class="bg-[#0C998A] hover:bg-teal-700 text-white font-bold text-sm sm:text-base md:text-lg px-6 sm:px-8 md:px-10 py-4 sm:py-3 md:py-3 rounded-md transition-all duration-300 inline-flex items-center justify-center shadow-lg hover:shadow-teal-500/30 hover:scale-105 active:scale-95 min-h-[48px]"
          >
            CONTCTANOS
          </a>
        </div>
      </div>
    </div>
  </section>

  {/*  Franja con mensaje "Sobre nuestros prop贸sitos y metas" */}
  <div
    class="bg-cover bg-center h-auto py-16 flex flex-col justify-center items-center"
  >
    <h2 class="text-4xl font-extrabold mb-12 text-center text-teal-600">
      Sobre nuestros prop贸sitos y metas
    </h2>

    <div class="grid grid-cols-1 md:grid-cols-2 gap-8 max-w-4xl px-6 w-full">
      <div
        class="group bg-white rounded-3xl shadow-lg p-8 border border-gray-100 transition-all duration-500 hover:shadow-[0_20px_40px_-15px_rgba(0,120,111,0.2)] hover:-translate-y-2 min-h-80 flex flex-col justify-center"
      >
        <h3
          class="text-3xl font-bold text-teal-600 mb-6 text-center transition-colors duration-300 group-hover:text-teal-500"
        >
          MISIN
        </h3>
        <p class="text-gray-700 text-center text-lg leading-relaxed">
          Entregar soluciones a emprendedores peruanos que compartan nuestro
          deseo de crecer.
        </p>
      </div>
      <div
        class="group bg-white rounded-3xl shadow-lg p-8 border border-gray-100 transition-all duration-500 hover:shadow-[0_20px_40px_-15px_rgba(0,120,111,0.2)] hover:-translate-y-2 min-h-80 flex flex-col justify-center"
      >
        <h3
          class="text-3xl font-bold text-teal-600 mb-6 text-center transition-colors duration-300 group-hover:text-teal-500"
        >
          VISIN
        </h3>
        <p class="text-gray-700 text-center text-lg leading-relaxed">
          Aspiramos a ser la soluci贸n confiable m谩s valorada por nuestros
          clientes.
        </p>
      </div>
    </div>
  </div>

  {/*  Secci贸n de Valores - Carrusel en m贸vil */}
  <section class="bg-white py-6 lg:py-12 px-4 lg:px-8 mb-12">
    <h2
      class="text-center text-teal-600 text-2xl sm:text-4xl md:text-5xl font-extrabold mb-16"
    >
      VALORES
    </h2>

    {/* Grid desktop */}
    <div
      class="hidden md:grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-5 md:gap-12 justify-items-center max-w-8xl mx-auto"
    >
      {
        valoresArray.map((valor: any) => (
          <div class="flex flex-col items-center w-full">
            <Card
              image={valor.image}
              title={valor.title}
              imageTitle={valor.imageTitle}
              paragraph={valor.paragraph}
            />
          </div>
        ))
      }
    </div>

    {/* Carrusel m贸vil */}
    <div class="md:hidden valores-carousel-container relative">
      <div class="swiper valoresSwiper w-full">
        <div class="swiper-wrapper">
          {
            valoresArray.map((valor: any) => (
              <div class="swiper-slide flex justify-center px-4">
                <Card
                  image={valor.image}
                  title={valor.title}
                  imageTitle={valor.imageTitle}
                  paragraph={valor.paragraph}
                />
              </div>
            ))
          }
        </div>

        <!-- Paginaci贸n -->
        <div class="swiper-pagination valores-swiper-pagination"></div>
      </div>
    </div>
  </section>

<!-- Estilos para el carrusel -->
  <style>
    .valores-carousel-container {
      padding: 0 10px;
    }
    .valoresSwiper {
      width: 100%;
      height: 100%;
      padding-bottom: 40px;
    }
    .swiper-slide {
      display: flex;
      justify-content: center;
      align-items: center;
    }
    .valores-swiper-pagination {
      bottom: 0;
      position: relative;
      margin-top: 8px;
    }
    .valores-swiper-pagination .swiper-pagination-bullet {
      background: #0c998a;
      opacity: 0.5;
      width: 12px;
      height: 12px;
      margin: 0 8px !important;
      position: relative;
    }
    .valores-swiper-pagination .swiper-pagination-bullet::before {
      content: "";
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 44px;
      height: 44px;
    }
    .valores-swiper-pagination .swiper-pagination-bullet-active {
      opacity: 1;
    }
  </style>

  <!-- Swiper JS -->
  <script
    src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"
    defer></script>

  <script>
    // @ts-nocheck
    
    (function () {
      
      const win = window;

      function waitForSwiperAndInit(maxAttempts = 50, interval = 100) {
        let attempts = 0;
        const timer = setInterval(() => {
          attempts++;
          // Verificamos si Swiper existe en window
          if (win.Swiper) {
            clearInterval(timer);
            initSwiper();
            return;
          }
          if (attempts >= maxAttempts) {
            clearInterval(timer);
            console.warn("Swiper no carg贸 a tiempo.");
          }
        }, interval);
      }

      function initSwiper() {
        if (window.innerWidth >= 768) return;

        // Accedemos a la propiedad personalizada de forma segura
        if (win._valoresSwiperInitialized) return;
        win._valoresSwiperInitialized = true;

        try {
          // @ts-ignore: Swiper viene del CDN
          const swiper = new win.Swiper(".valoresSwiper", {
            loop: false,
            slidesPerView: 1,
            spaceBetween: 20,
            centeredSlides: true,
            pagination: {
              el: ".valores-swiper-pagination",
              clickable: true,
            },
            autoplay: {
              delay: 2000,
              disableOnInteraction: false,
            },
            breakpoints: {
              640: { slidesPerView: 1.2 },
            },
          });

          // Usamos arrow function para que el contexto sea correcto y no falle 'this'
          swiper.on("slideChange", (s) => {
            if (s.isEnd) {
              setTimeout(() => {
                s.slideTo(0, 500);
              }, 2000);
            }
          });
        } catch (err) {
          console.error("Error inicializando Swiper:", err);
        }
      }

      if (win.Swiper) {
        initSwiper();
      } else {
        waitForSwiperAndInit();
      }

      let resizeTimeout;
      window.addEventListener("resize", () => {
        clearTimeout(resizeTimeout);
        resizeTimeout = setTimeout(() => {
          if (window.innerWidth < 768 && !win._valoresSwiperInitialized) {
            if (win.Swiper) initSwiper();
          }
        }, 200);
      });
    })();
  </script>
</Layout>
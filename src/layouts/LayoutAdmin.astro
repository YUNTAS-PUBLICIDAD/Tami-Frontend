---
import Sidebar from "../components/admin/ui/Sidebar";
import Header from "../components/admin/ui/Header";
import "../styles/global.css";
import ProtectedRoute from "src/components/ProtectedRoute";
const { title } = Astro.props;
---

<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" type="image/webp+xml" href="/logo.webp" />
    <meta name="generator" content={Astro.generator} />
    <title>{title}</title>
  </head>

  <!-- Usamos var(--background-color) y var(--text-color) para todo -->
  <body
    class="h-screen overflow-hidden pt-16 bg-[var(--background-color)] text-[var(--text-color)]"
  >
    <ProtectedRoute client:only>
      <Header title={title} client:load />

      <button
        id="burgerBtn"
        class="lg:hidden fixed top-4 right-4 z-50 bg-[var(--background-color)] text-[var(--text-color)] p-2 rounded shadow"
        onclick="document.getElementById('mobileSidebar').classList.toggle('-translate-x-full')"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          class="h-6 w-6"
          fill="none"
          viewBox="0 0 24 24"
          stroke="currentColor"
          stroke-width="2"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            d="M4 6h16M4 12h16M4 18h16"></path>
        </svg>
      </button>

      <div
        id="mobileSidebar"
        class="lg:hidden fixed top-16 left-0 w-72 h-[calc(100vh-4rem)] bg-[var(--background-color)] shadow-lg z-40 transform -translate-x-full transition-transform duration-300 overflow-y-scroll scrollbar-none"
      >
        <div class="h-full">
          <Sidebar client:load />
        </div>
      </div>

      <div class="flex h-[calc(100vh-4rem)]">
        <aside
          class="fixed top-16 left-0 h-[calc(100vh-4rem)] bg-[var(--background-color)] shadow-lg z-40 lg:w-72 w-full lg:block hidden"
        >
          <Sidebar client:load />
        </aside>

        <main
          class="lg:ml-72 flex-1 overflow-y-auto p-6 bg-[var(--background-color)] text-[var(--text-color)]"
        >
          <slot />
        </main>
      </div>
    </ProtectedRoute>
  </body>
</html>
